<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula 2: RAG & Agentes Inteligentes | Bootcamp Ita√∫ FIAP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <style>
        /* Palette: "Ita√∫ Banking AI" Theme */
        /* Background: #0a0e1a (Deep Navy) */
        /* Primary: #D4AF37 (Gold - Ita√∫ accent) */
        /* Secondary: #3b82f6 (Blue-500) for Data, #10b981 (Green-500) for Success */

        @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&family=Fira+Code:wght@400;500;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0a0e1a 0%, #020617 100%);
            color: #e2e8f0;
            line-height: 1.6;
        }

        .font-mono { 
            font-family: 'Fira Code', 'Consolas', monospace; 
            font-variant-ligatures: normal;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0a0e1a; }
        ::-webkit-scrollbar-thumb { 
            background: linear-gradient(180deg, #D4AF37 0%, #b8941f 100%); 
            border-radius: 4px; 
        }
        ::-webkit-scrollbar-thumb:hover { 
            background: linear-gradient(180deg, #f5c842 0%, #D4AF37 100%); 
        }

        /* Animations */
        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards; opacity: 0; }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        .slide-in-left { animation: slideInLeft 0.5s ease-out forwards; }
        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .pulse-border { animation: pulseBorder 2s infinite; }
        @keyframes pulseBorder { 
            0% { border-color: rgba(212, 175, 55, 0.4); box-shadow: 0 0 0 rgba(212, 175, 55, 0); }
            50% { border-color: rgba(212, 175, 55, 0.8); box-shadow: 0 0 15px rgba(212, 175, 55, 0.4); }
            100% { border-color: rgba(212, 175, 55, 0.4); box-shadow: 0 0 0 rgba(212, 175, 55, 0); }
        }

        .glow { animation: glow 3s ease-in-out infinite; }
        @keyframes glow {
            0%, 100% { text-shadow: 0 0 5px rgba(212, 175, 55, 0.5); }
            50% { text-shadow: 0 0 20px rgba(212, 175, 55, 0.8), 0 0 30px rgba(212, 175, 55, 0.4); }
        }

        /* Nav Items */
        .nav-item {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }
        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, rgba(212, 175, 55, 0.1) 0%, transparent 100%);
            transition: width 0.3s ease;
        }
        .nav-item:hover::before {
            width: 100%;
        }
        .nav-item:hover, .nav-item.active {
            background: rgba(212, 175, 55, 0.08);
            border-left-color: #D4AF37;
            color: #f5c842;
            transform: translateX(2px);
        }
        .nav-item.active {
            font-weight: 600;
            box-shadow: inset 0 0 20px rgba(212, 175, 55, 0.1);
        }
        .nav-section-title {
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 0.1em;
            color: #64748b;
            padding: 0.75rem 1.5rem;
            margin-top: 1rem;
            text-transform: uppercase;
        }

        /* Chunk Visuals */
        .chunk {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        .chunk:hover { 
            background-color: rgba(212, 175, 55, 0.15); 
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2);
        }
        .chunk.active { 
            background-color: rgba(212, 175, 55, 0.25); 
            border: 1px solid #D4AF37;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        /* Code Blocks */
        .code-block-container {
            position: relative;
            margin: 1.5rem 0;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: #D4AF37;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 11px;
            font-weight: 600;
        }
        .copy-btn:hover {
            background: rgba(212, 175, 55, 0.2);
            transform: translateY(-1px);
        }

        /* Cards & Panels */
        .card {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(100, 116, 139, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        .card:hover {
            border-color: rgba(212, 175, 55, 0.5);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }

        .gold-accent {
            color: #D4AF37;
        }
        .gold-border {
            border-color: #D4AF37;
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .badge-gold {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.1) 100%);
            border: 1px solid rgba(212, 175, 55, 0.4);
            color: #f5c842;
        }
        .badge-blue {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.4);
            color: #60a5fa;
        }
        .badge-green {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.4);
            color: #34d399;
        }

        /* Print Styles */
        @media print {
            * { 
                background: white !important; 
                color: black !important; 
                text-shadow: none !important;
                box-shadow: none !important;
            }
            
            body { 
                font-family: 'IBM Plex Sans', sans-serif;
                font-size: 12pt;
                line-height: 1.5;
            }
            
            .no-print, aside, .copy-btn, button { 
                display: none !important; 
            }
            
            main {
                margin: 0 !important;
                padding: 20pt !important;
            }
            
            .card { 
                border: 1px solid #333 !important; 
                page-break-inside: avoid;
                margin-bottom: 20pt;
                padding: 15pt;
            }
            
            h1, h2, h3 { 
                page-break-after: avoid;
                color: #000 !important;
                margin-top: 15pt;
            }
            
            pre, code {
                border: 1px solid #ccc !important;
                page-break-inside: avoid;
                font-family: 'Fira Code', 'Courier New', monospace;
                font-size: 9pt;
                padding: 10pt;
                white-space: pre-wrap;
                word-wrap: break-word;
            }
            
            .badge {
                border: 1px solid #333 !important;
                padding: 2pt 6pt;
            }
            
            table {
                border-collapse: collapse;
                width: 100%;
            }
            
            table, th, td {
                border: 1px solid #333 !important;
            }
            
            th, td {
                padding: 8pt;
                text-align: left;
            }
            
            /* Add URLs after links */
            a[href]:after {
                content: " (" attr(href) ")";
                font-size: 9pt;
                color: #666;
            }
            
            /* Print page numbers */
            @page {
                margin: 2cm;
                
                @bottom-right {
                    content: "P√°gina " counter(page);
                    font-size: 9pt;
                }
            }
        }

        /* Accessibility - Focus styles */
        *:focus {
            outline: 2px solid #D4AF37;
            outline-offset: 2px;
        }

        button:focus, a:focus, input:focus, textarea:focus {
            outline: 2px solid #D4AF37;
            outline-offset: 2px;
        }

        /* Reduced motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .card {
                border-width: 2px;
            }
            
            button, .nav-item {
                border: 2px solid currentColor;
            }
        }
    </style>
</head>
<body class="flex h-screen overflow-hidden text-sm md:text-base">

    <!-- Sidebar -->
    <aside role="complementary" aria-label="Navega√ß√£o lateral" class="w-72 bg-slate-900 border-r border-slate-800 flex flex-col z-20 hidden md:flex shadow-2xl">
        <div class="p-6 border-b border-slate-800 bg-gradient-to-br from-slate-900 to-slate-950">
            <h1 class="text-xl font-bold gold-accent tracking-wider flex items-center gap-2 glow">
                <i class="fas fa-brain"></i> RAG & AGENTES
            </h1>
            <p class="text-xs text-slate-500 mt-1 font-medium">Bootcamp Ita√∫ | FIAP 2026</p>
        </div>
        
        <nav role="navigation" aria-label="Menu principal" class="flex-1 py-4 overflow-y-auto">
            <!-- Fundamentos -->
            <div class="nav-section-title">
                <i class="fas fa-book-open mr-1"></i> Fundamentos
            </div>
            <button onclick="router('intro-rag')" id="nav-intro-rag" class="nav-item active w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-lightbulb w-5 text-center mr-2"></i> Por que RAG?
            </button>
            <button onclick="router('rag-architecture')" id="nav-rag-architecture" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-sitemap w-5 text-center mr-2"></i> Arquitetura B√°sica
            </button>
            <button onclick="router('rag-vs-finetune')" id="nav-rag-vs-finetune" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-balance-scale w-5 text-center mr-2"></i> RAG vs Fine-tuning
            </button>

            <!-- Engenharia de Dados -->
            <div class="nav-section-title">
                <i class="fas fa-database mr-1"></i> Engenharia de Dados
            </div>
            <button onclick="router('chunking')" id="nav-chunking" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-cut w-5 text-center mr-2"></i> Chunking Strategies
            </button>
            <button onclick="router('embeddings')" id="nav-embeddings" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-project-diagram w-5 text-center mr-2"></i> Embedding Models
            </button>
            <button onclick="router('vector-dbs')" id="nav-vector-dbs" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-cubes w-5 text-center mr-2"></i> Vector Databases
            </button>

            <!-- RAG Avan√ßado -->
            <div class="nav-section-title">
                <i class="fas fa-rocket mr-1"></i> RAG Avan√ßado
            </div>
            <button onclick="router('hybrid-search')" id="nav-hybrid-search" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-search-plus w-5 text-center mr-2"></i> Hybrid Search
            </button>
            <button onclick="router('reranking')" id="nav-reranking" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-sort-amount-down w-5 text-center mr-2"></i> Re-ranking
            </button>
            <button onclick="router('hyde')" id="nav-hyde" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-magic w-5 text-center mr-2"></i> HyDE
            </button>
            <button onclick="router('parent-child')" id="nav-parent-child" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-layer-group w-5 text-center mr-2"></i> Parent-Child Chunking
            </button>
            <button onclick="router('raptor')" id="nav-raptor" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-network-wired w-5 text-center mr-2"></i> RAPTOR
            </button>

            <!-- Agentes -->
            <div class="nav-section-title">
                <i class="fas fa-robot mr-1"></i> Agentes LangChain
            </div>
            <button onclick="router('react-pattern')" id="nav-react-pattern" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-brain w-5 text-center mr-2"></i> ReAct Pattern
            </button>
            <button onclick="router('tool-calling')" id="nav-tool-calling" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-tools w-5 text-center mr-2"></i> Tool Calling
            </button>
            <button onclick="router('planning')" id="nav-planning" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-tasks w-5 text-center mr-2"></i> Planning
            </button>
            <button onclick="router('memory')" id="nav-memory" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-memory w-5 text-center mr-2"></i> Memory Systems
            </button>
            <button onclick="router('agent-arch')" id="nav-agent-arch" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-object-group w-5 text-center mr-2"></i> Agent Architectures
            </button>

            <!-- Lab -->
            <div class="nav-section-title">
                <i class="fas fa-flask mr-1"></i> Lab Pr√°tico
            </div>
            <button onclick="router('lab-overview')" id="nav-lab-overview" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-diagram-project w-5 text-center mr-2"></i> Arquitetura do Projeto
            </button>
            <button onclick="router('lab-code')" id="nav-lab-code" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-code w-5 text-center mr-2"></i> Code Walkthrough
            </button>
            <button onclick="router('lab-exercises')" id="nav-lab-exercises" class="nav-item w-full text-left px-6 py-2.5 text-sm text-slate-300">
                <i class="fas fa-clipboard-check w-5 text-center mr-2"></i> Exerc√≠cios
            </button>
        </nav>

        <div class="p-4 border-t border-slate-800 bg-slate-950 no-print">
            <div class="bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-lg p-3 text-xs text-slate-400 border border-slate-700/50">
                <div class="flex justify-between mb-1.5">
                    <span class="font-medium">ChromaDB Status</span>
                    <span class="text-green-400 font-semibold flex items-center gap-1">
                        <span class="w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"></span>
                        Connected
                    </span>
                </div>
                <div class="w-full bg-slate-700/50 h-1.5 rounded-full overflow-hidden">
                    <div class="bg-gradient-to-r from-blue-500 to-green-500 w-1/3 h-full"></div>
                </div>
                <div class="mt-1.5 text-[10px] text-right text-slate-500 font-mono">342 vectors indexed</div>
            </div>
        </div>
    </aside>

    <!-- Mobile Header -->
    <div class="md:hidden fixed top-0 w-full bg-slate-900 border-b border-slate-800 z-30 flex justify-between items-center p-4 shadow-lg">
        <h1 class="font-bold gold-accent text-sm">
            <i class="fas fa-brain mr-1"></i> RAG & AGENTES
        </h1>
        <button onclick="toggleMobileMenu()" class="text-slate-300 hover:text-gold-accent transition">
            <i class="fas fa-bars text-lg"></i>
        </button>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="md:hidden fixed inset-0 bg-slate-950/95 z-40 hidden backdrop-blur-sm">
        <div class="p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-lg font-bold gold-accent">Menu de Navega√ß√£o</h2>
                <button onclick="toggleMobileMenu()" class="text-slate-300">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="space-y-2 overflow-y-auto max-h-[80vh]">
                <!-- Nav items will be cloned here via JS -->
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main id="app-content" role="main" aria-live="polite" class="flex-1 bg-slate-950 p-6 md:p-10 mt-14 md:mt-0 overflow-y-auto relative">
        <!-- Views injected here -->
    </main>

    <!-- JS Logic -->
    <script>
        // --- DATA ---
        
        // Mock Contract Text for Chunking/Lab
        const CONTRACT_TEXT = `CONTRATO DE M√öTUO CONVERS√çVEL

CL√ÅUSULA PRIMEIRA - DO OBJETO
1.1. Pelo presente instrumento, a MUTUANTE disponibiliza √† MUTU√ÅRIA a quantia de R$ 1.500.000,00 (um milh√£o e quinhentos mil reais), doravante denominada "Principal".
1.2. O recurso dever√° ser utilizado exclusivamente para expans√£o tecnol√≥gica da MUTU√ÅRIA, conforme plano de neg√≥cios anexo.

CL√ÅUSULA SEGUNDA - DOS JUROS E CORRE√á√ÉO
2.1. Sobre o Principal incidir√£o juros remunerat√≥rios de 1% (um por cento) ao m√™s, calculados pro rata temporis.
2.2. O valor ser√° corrigido anualmente pelo IPCA acumulado.

CL√ÅUSULA TERCEIRA - DO VENCIMENTO E PAGAMENTO
3.1. O vencimento deste contrato ocorrer√° em 36 (trinta e seis) meses a contar da data de assinatura.
3.2. O pagamento ser√° bullet (parcela √∫nica) ao final do per√≠odo, salvo em caso de convers√£o em participa√ß√£o societ√°ria.

CL√ÅUSULA QUARTA - DAS GARANTIAS
4.1. Como garantia fiel do cumprimento das obriga√ß√µes, a MUTU√ÅRIA oferece em aliena√ß√£o fiduci√°ria o im√≥vel de matr√≠cula n¬∫ 12345 do 2¬∫ CRI de S√£o Paulo.

CL√ÅUSULA QUINTA - DO INADIMPLEMENTO
5.1. O atraso superior a 10 dias implicar√° multa de 10% sobre o saldo devedor.`;

        // --- STATE ---
        let currentChart = null;

        // --- UTILS ---
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        function sanitizeHTML(str) {
            const div = document.createElement('div');
            div.textContent = str;
            return div.innerHTML;
        }

        function copyCode(button) {
            const codeBlock = button.parentElement.querySelector('code');
            navigator.clipboard.writeText(codeBlock.textContent);
            button.innerHTML = '<i class="fas fa-check mr-1"></i>Copiado!';
            setTimeout(() => {
                button.innerHTML = '<i class="fas fa-copy mr-1"></i>Copiar';
            }, 2000);
        }

        // --- ROUTER ---
        function router(view) {
            // Update Nav
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active');
            });
            const nav = document.getElementById('nav-' + view);
            if(nav) nav.classList.add('active');

            // Close mobile menu if open
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu) mobileMenu.classList.add('hidden');

            const app = document.getElementById('app-content');
            
            // Fundamentos
            if (view === 'intro-rag') renderIntroRAG(app);
            if (view === 'rag-architecture') renderRAGArchitecture(app);
            if (view === 'rag-vs-finetune') renderRAGvsFinetune(app);
            
            // Engenharia de Dados
            if (view === 'chunking') renderChunking(app);
            if (view === 'embeddings') renderEmbeddings(app);
            if (view === 'vector-dbs') renderVectorDBs(app);
            
            // RAG Avan√ßado
            if (view === 'hybrid-search') renderHybridSearch(app);
            if (view === 'reranking') renderReranking(app);
            if (view === 'hyde') renderHyDE(app);
            if (view === 'parent-child') renderParentChild(app);
            if (view === 'raptor') renderRAPTOR(app);
            
            // Agentes
            if (view === 'react-pattern') renderReActPattern(app);
            if (view === 'tool-calling') renderToolCalling(app);
            if (view === 'planning') renderPlanning(app);
            if (view === 'memory') renderMemory(app);
            if (view === 'agent-arch') renderAgentArchitectures(app);
            
            // Lab
            if (view === 'lab-overview') renderLabOverview(app);
            if (view === 'lab-code') renderLabCode(app);
            if (view === 'lab-exercises') renderLabExercises(app);

            // Scroll to top
            app.scrollTop = 0;
        }

        // --- RENDERERS ---
        // === FUNDAMENTOS ===

        function renderIntroRAG(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-gold"><i class="fas fa-lightbulb mr-1"></i>Fundamentos</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Por que RAG?</h1>
                        <p class="text-slate-400 text-lg">O problema da janela de contexto e a necessidade de dados privados em tempo real.</p>
                    </div>

                    <div class="grid md:grid-cols-2 gap-8 mb-12">
                        <!-- Problem -->
                        <div class="card border-red-900/30">
                            <h3 class="text-red-400 font-bold mb-4 text-lg">
                                <i class="fas fa-exclamation-triangle mr-2"></i>O Problema do Contexto
                            </h3>
                            <ul class="space-y-4 text-slate-300">
                                <li class="flex items-start gap-3">
                                    <span class="text-red-500 text-xl">‚Ä¢</span>
                                    <div>
                                        <strong class="text-white">Alucina√ß√£o:</strong>
                                        <p class="text-sm text-slate-400 mt-1">LLMs inventam fatos quando n√£o possuem informa√ß√£o suficiente, criando respostas plaus√≠veis mas incorretas.</p>
                                    </div>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-red-500 text-xl">‚Ä¢</span>
                                    <div>
                                        <strong class="text-white">Janela Limitada:</strong>
                                        <p class="text-sm text-slate-400 mt-1">GPT-4 tem ~128k tokens (~100k palavras). Voc√™ n√£o pode colar 10.000 contratos simultaneamente.</p>
                                    </div>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-red-500 text-xl">‚Ä¢</span>
                                    <div>
                                        <strong class="text-white">Dados Desatualizados:</strong>
                                        <p class="text-sm text-slate-400 mt-1">Modelo treinado at√© 2023 n√£o sabe sobre mudan√ßas regulat√≥rias de 2026 ou dados em tempo real do seu sistema.</p>
                                    </div>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-red-500 text-xl">‚Ä¢</span>
                                    <div>
                                        <strong class="text-white">Privacidade & Compliance:</strong>
                                        <p class="text-sm text-slate-400 mt-1">Dados sens√≠veis do Ita√∫ n√£o podem ser enviados para o treinamento de modelos p√∫blicos (OpenAI, Anthropic).</p>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <!-- Solution -->
                        <div class="card border-green-900/30">
                            <h3 class="text-green-400 font-bold mb-4 text-lg">
                                <i class="fas fa-check-circle mr-2"></i>A Solu√ß√£o RAG
                            </h3>
                            <ul class="space-y-4 text-slate-300">
                                <li class="flex items-start gap-3">
                                    <span class="gold-accent text-xl font-bold">1.</span>
                                    <div>
                                        <strong class="text-white">Retrieval (Busca):</strong>
                                        <p class="text-sm text-slate-400 mt-1">Transforme a pergunta do usu√°rio em embedding e busque os <em>top-K chunks</em> mais relevantes no Vector DB.</p>
                                    </div>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="gold-accent text-xl font-bold">2.</span>
                                    <div>
                                        <strong class="text-white">Augmentation (Aumento):</strong>
                                        <p class="text-sm text-slate-400 mt-1">Injete esses chunks diretamente no prompt do LLM como "contexto autoritativo".</p>
                                    </div>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="gold-accent text-xl font-bold">3.</span>
                                    <div>
                                        <strong class="text-white">Generation (Gera√ß√£o):</strong>
                                        <p class="text-sm text-slate-400 mt-1">Instrua o LLM: <em>"Responda APENAS com base no contexto fornecido. Se n√£o souber, diga que n√£o sabe."</em></p>
                                    </div>
                                </li>
                            </ul>
                            
                            <div class="mt-6 p-3 bg-green-900/20 border border-green-800/50 rounded-lg">
                                <p class="text-xs text-green-300 font-medium">
                                    <i class="fas fa-info-circle mr-1"></i>
                                    <strong>Resultado:</strong> LLM responde com dados privados atualizados, sem precisar retreinar o modelo.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Use Cases -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-briefcase mr-2 gold-accent"></i>Casos de Uso no Ita√∫
                        </h3>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">üìÑ</div>
                                <h4 class="font-bold text-white text-sm mb-1">An√°lise de Contratos</h4>
                                <p class="text-xs text-slate-400">Extrair cl√°usulas, garantias e riscos de contratos de cr√©dito.</p>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">üìä</div>
                                <h4 class="font-bold text-white text-sm mb-1">Relat√≥rios Regulat√≥rios</h4>
                                <p class="text-xs text-slate-400">Responder perguntas sobre compliance BACEN com base em manuais internos.</p>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">üí¨</div>
                                <h4 class="font-bold text-white text-sm mb-1">Chatbot de Pol√≠ticas</h4>
                                <p class="text-xs text-slate-400">Assistente que responde d√∫vidas de funcion√°rios sobre RH, benef√≠cios, etc.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Cost Comparison -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-dollar-sign mr-2 gold-accent"></i>RAG vs Fine-tuning: Custo
                        </h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-slate-800">
                                    <tr class="border-b border-slate-700">
                                        <th class="text-left p-3 text-slate-300 font-semibold">M√©trica</th>
                                        <th class="text-left p-3 text-green-300 font-semibold">RAG</th>
                                        <th class="text-left p-3 text-orange-300 font-semibold">Fine-tuning</th>
                                    </tr>
                                </thead>
                                <tbody class="text-slate-300">
                                    <tr class="border-b border-slate-800">
                                        <td class="p-3 font-medium">Custo Inicial</td>
                                        <td class="p-3 text-green-400">$50-200 (embedding + indexing)</td>
                                        <td class="p-3 text-orange-400">$10,000-100,000 (training epochs)</td>
                                    </tr>
                                    <tr class="border-b border-slate-800">
                                        <td class="p-3 font-medium">Atualiza√ß√£o de Dados</td>
                                        <td class="p-3 text-green-400">Instant√¢nea (re-index chunk)</td>
                                        <td class="p-3 text-orange-400">Horas/dias (re-training)</td>
                                    </tr>
                                    <tr class="border-b border-slate-800">
                                        <td class="p-3 font-medium">Transpar√™ncia</td>
                                        <td class="p-3 text-green-400">Alta (mostra fonte dos chunks)</td>
                                        <td class="p-3 text-orange-400">Baixa (caixa-preta)</td>
                                    </tr>
                                    <tr>
                                        <td class="p-3 font-medium">Melhor para</td>
                                        <td class="p-3 text-green-400">Conhecimento factual privado</td>
                                        <td class="p-3 text-orange-400">Estilo de escrita, dom√≠nio espec√≠fico</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderRAGArchitecture(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-gold"><i class="fas fa-sitemap mr-1"></i>Fundamentos</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Arquitetura RAG B√°sica</h1>
                        <p class="text-slate-400 text-lg">Os 3 componentes essenciais: Document Processing, Vector Store e Query Engine.</p>
                    </div>

                    <!-- Pipeline Visual -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-flow-chart mr-2 gold-accent"></i>Pipeline Completo
                        </h3>
                        <div class="relative bg-slate-900 border border-slate-800 rounded-xl p-8 flex flex-col md:flex-row items-center justify-between gap-6">
                        <div class="text-center w-32">
                                <div class="w-20 h-20 bg-gradient-to-br from-red-900/30 to-red-800/30 rounded-xl mx-auto flex items-center justify-center text-3xl mb-3 border border-red-800/50 shadow-lg">
                                    <i class="fas fa-file-pdf text-red-400"></i>
                                </div>
                                <div class="text-sm font-bold text-white">Documentos</div>
                                <div class="text-xs font-mono text-slate-500 mt-1">PDFs, Contratos, Manuais</div>
                        </div>
                        
                            <div class="flex-1 h-1 bg-gradient-to-r from-slate-700 to-slate-800 relative group cursor-pointer rounded">
                                <div class="absolute -top-4 w-full text-center text-[11px] text-slate-400 uppercase font-semibold">Chunking + Embedding</div>
                                <div class="h-full bg-gradient-to-r from-blue-500 to-blue-600 w-0 group-hover:w-full transition-all duration-1000 rounded"></div>
                        </div>

                        <div class="text-center w-32">
                                <div class="w-20 h-20 bg-gradient-to-br from-blue-900/30 to-blue-800/30 rounded-xl mx-auto flex items-center justify-center text-3xl mb-3 border border-blue-800/50 shadow-lg">
                                    <i class="fas fa-database text-blue-400"></i>
                                </div>
                                <div class="text-sm font-bold text-white">Vector Store</div>
                                <div class="text-xs font-mono text-slate-500 mt-1">ChromaDB, Pinecone</div>
                        </div>

                            <div class="flex-1 h-1 bg-gradient-to-r from-slate-800 to-slate-700 relative group cursor-pointer rounded">
                                <div class="absolute -top-4 w-full text-center text-[11px] text-slate-400 uppercase font-semibold">Similarity Search</div>
                                <div class="h-full bg-gradient-to-r from-green-500 to-green-600 w-0 group-hover:w-full transition-all duration-1000 rounded"></div>
                        </div>

                        <div class="text-center w-32">
                                <div class="w-20 h-20 bg-gradient-to-br from-purple-900/30 to-purple-800/30 rounded-xl mx-auto flex items-center justify-center text-3xl mb-3 border border-purple-800/50 shadow-lg">
                                    <i class="fas fa-robot text-purple-400"></i>
                                </div>
                                <div class="text-sm font-bold text-white">LLM</div>
                                <div class="text-xs font-mono text-slate-500 mt-1">GPT-4, Claude</div>
                            </div>
                        </div>
                    </div>

                    <!-- Components Detail -->
                    <div class="grid md:grid-cols-3 gap-6 mb-8">
                        <div class="card">
                            <div class="text-3xl mb-3">üìù</div>
                            <h4 class="text-lg font-bold text-white mb-2">1. Document Processing</h4>
                            <ul class="space-y-2 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>Extraction:</strong> PDFs ‚Üí texto puro</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>Chunking:</strong> Dividir em par√°grafos</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>Embedding:</strong> texto ‚Üí vetor (1536D)</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>Indexing:</strong> Salvar no vector DB</span>
                                </li>
                            </ul>
                        </div>

                        <div class="card">
                            <div class="text-3xl mb-3">üîç</div>
                            <h4 class="text-lg font-bold text-white mb-2">2. Retrieval</h4>
                            <ul class="space-y-2 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>Query Embedding:</strong> Pergunta ‚Üí vetor</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>Similarity:</strong> Cosine/Euclidean</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>Top-K:</strong> Retorna 3-5 chunks</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>Metadata:</strong> Filtros (data, tipo)</span>
                                </li>
                            </ul>
                        </div>

                        <div class="card">
                            <div class="text-3xl mb-3">ü§ñ</div>
                            <h4 class="text-lg font-bold text-white mb-2">3. Generation</h4>
                            <ul class="space-y-2 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>Prompt:</strong> System + Context + Query</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>LLM Call:</strong> OpenAI/Anthropic API</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>Parsing:</strong> JSON structured output</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-chevron-right text-gold-accent text-xs mt-1"></i>
                                    <span><strong>Citation:</strong> Link para fonte</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Key Metrics -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-tachometer-alt mr-2 gold-accent"></i>M√©tricas de Performance
                        </h3>
                        <div class="grid md:grid-cols-4 gap-4">
                            <div class="bg-slate-800/50 p-4 rounded-lg text-center border border-slate-700">
                                <div class="text-3xl font-bold gold-accent mb-1">95%</div>
                                <div class="text-xs text-slate-400 uppercase font-semibold">Precision@5</div>
                                <div class="text-[10px] text-slate-500 mt-1">Top-5 chunks relevantes</div>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg text-center border border-slate-700">
                                <div class="text-3xl font-bold text-blue-400 mb-1">200ms</div>
                                <div class="text-xs text-slate-400 uppercase font-semibold">Latency</div>
                                <div class="text-[10px] text-slate-500 mt-1">Tempo de retrieval</div>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg text-center border border-slate-700">
                                <div class="text-3xl font-bold text-green-400 mb-1">1M+</div>
                                <div class="text-xs text-slate-400 uppercase font-semibold">Vectors</div>
                                <div class="text-[10px] text-slate-500 mt-1">Capacidade ChromaDB</div>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg text-center border border-slate-700">
                                <div class="text-3xl font-bold text-purple-400 mb-1">$0.10</div>
                                <div class="text-xs text-slate-400 uppercase font-semibold">Cost/Query</div>
                                <div class="text-[10px] text-slate-500 mt-1">Embedding + LLM</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderRAGvsFinetune(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-gold"><i class="fas fa-balance-scale mr-1"></i>Fundamentos</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">RAG vs Fine-tuning</h1>
                        <p class="text-slate-400 text-lg">Quando usar cada abordagem? Trade-offs e casos de uso ideais.</p>
                    </div>

                    <!-- Comparison Matrix -->
                    <div class="card mb-8">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b-2 border-slate-700">
                                        <th class="text-left p-4 text-slate-400 font-semibold w-1/4">Crit√©rio</th>
                                        <th class="text-left p-4 text-green-400 font-bold">
                                            <i class="fas fa-search mr-2"></i>RAG
                                        </th>
                                        <th class="text-left p-4 text-orange-400 font-bold">
                                            <i class="fas fa-brain mr-2"></i>Fine-tuning
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="text-sm">
                                    <tr class="border-b border-slate-800">
                                        <td class="p-4 font-semibold text-white">Prop√≥sito</td>
                                        <td class="p-4 text-slate-300">Adicionar conhecimento <strong>factual</strong> externo</td>
                                        <td class="p-4 text-slate-300">Ajustar <strong>comportamento</strong> e estilo de resposta</td>
                                    </tr>
                                    <tr class="border-b border-slate-800 bg-slate-900/30">
                                        <td class="p-4 font-semibold text-white">Custo</td>
                                        <td class="p-4 text-green-400">Baixo ($50-500)</td>
                                        <td class="p-4 text-orange-400">Alto ($10k-100k)</td>
                                    </tr>
                                    <tr class="border-b border-slate-800">
                                        <td class="p-4 font-semibold text-white">Tempo de Setup</td>
                                        <td class="p-4 text-green-400">Minutos/Horas</td>
                                        <td class="p-4 text-orange-400">Dias/Semanas</td>
                                    </tr>
                                    <tr class="border-b border-slate-800 bg-slate-900/30">
                                        <td class="p-4 font-semibold text-white">Atualiza√ß√£o</td>
                                        <td class="p-4 text-green-400">Instant√¢nea (re-index)</td>
                                        <td class="p-4 text-orange-400">Lenta (re-training)</td>
                                    </tr>
                                    <tr class="border-b border-slate-800">
                                        <td class="p-4 font-semibold text-white">Transpar√™ncia</td>
                                        <td class="p-4 text-green-400">Alta (mostra fontes)</td>
                                        <td class="p-4 text-orange-400">Baixa (caixa-preta)</td>
                                    </tr>
                                    <tr class="border-b border-slate-800 bg-slate-900/30">
                                        <td class="p-4 font-semibold text-white">Escalabilidade</td>
                                        <td class="p-4 text-green-400">Excelente (milh√µes de docs)</td>
                                        <td class="p-4 text-orange-400">Limitada (tamanho do dataset)</td>
                                    </tr>
                                    <tr>
                                        <td class="p-4 font-semibold text-white">Melhor para</td>
                                        <td class="p-4 text-slate-300">
                                            <ul class="list-disc list-inside space-y-1">
                                                <li>Documentos internos</li>
                                                <li>Dados em tempo real</li>
                                                <li>Compliance/Regulat√≥rio</li>
                                            </ul>
                                        </td>
                                        <td class="p-4 text-slate-300">
                                            <ul class="list-disc list-inside space-y-1">
                                                <li>Tom de voz espec√≠fico</li>
                                                <li>Dom√≠nio t√©cnico especializado</li>
                                                <li>Formato de sa√≠da consistente</li>
                                            </ul>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Decision Tree -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-sitemap mr-2 gold-accent"></i>√Årvore de Decis√£o
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-start gap-4">
                                <div class="bg-blue-900/30 border border-blue-800/50 rounded-lg p-3 text-center min-w-[100px]">
                                    <div class="text-xs text-blue-400 font-bold">PERGUNTA</div>
                                </div>
                                <div class="flex-1 bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                    <p class="text-white font-semibold mb-2">Voc√™ precisa adicionar conhecimento novo/privado?</p>
                                    <div class="text-sm text-slate-400">Ex: "Qual a cl√°usula de garantias no contrato X?"</div>
                                </div>
                                <div class="text-2xl gold-accent">‚Üí</div>
                                <div class="bg-green-900/30 border border-green-800/50 rounded-lg p-3 text-center min-w-[100px]">
                                    <div class="text-xs text-green-400 font-bold">RAG</div>
                                </div>
                            </div>

                            <div class="flex items-start gap-4">
                                <div class="bg-blue-900/30 border border-blue-800/50 rounded-lg p-3 text-center min-w-[100px]">
                                    <div class="text-xs text-blue-400 font-bold">PERGUNTA</div>
                                </div>
                                <div class="flex-1 bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                    <p class="text-white font-semibold mb-2">Voc√™ quer mudar o <em>comportamento</em> do modelo?</p>
                                    <div class="text-sm text-slate-400">Ex: "Sempre responda em formato JSON, usando linguagem formal banc√°ria"</div>
                                </div>
                                <div class="text-2xl gold-accent">‚Üí</div>
                                <div class="bg-orange-900/30 border border-orange-800/50 rounded-lg p-3 text-center min-w-[100px]">
                                    <div class="text-xs text-orange-400 font-bold">FINE-TUNE</div>
                                </div>
                            </div>

                            <div class="flex items-start gap-4">
                                <div class="bg-purple-900/30 border border-purple-800/50 rounded-lg p-3 text-center min-w-[100px]">
                                    <div class="text-xs text-purple-400 font-bold">H√çBRIDO</div>
                                </div>
                                <div class="flex-1 bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                    <p class="text-white font-semibold mb-2">Melhor dos dois mundos</p>
                                    <div class="text-sm text-slate-400">
                                        1. Fine-tune o modelo para entender jarg√£o banc√°rio<br>
                                        2. Use RAG para buscar contratos espec√≠ficos<br>
                                        <span class="gold-accent font-semibold">‚Üí Resposta precisa em tom corporativo</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Real Examples -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="card border-green-900/30">
                            <h4 class="text-lg font-bold text-green-400 mb-3">
                                <i class="fas fa-check-circle mr-2"></i>Casos Ideais para RAG
                            </h4>
                            <ul class="space-y-3 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <span class="gold-accent">‚Ä¢</span>
                                    <div>
                                        <strong class="text-white">Chatbot de Pol√≠ticas Internas</strong>
                                        <p class="text-xs text-slate-400 mt-0.5">Manuais do RH, benef√≠cios, compliance</p>
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="gold-accent">‚Ä¢</span>
                                    <div>
                                        <strong class="text-white">Auditor de Contratos</strong>
                                        <p class="text-xs text-slate-400 mt-0.5">Buscar cl√°usulas espec√≠ficas em 10k contratos</p>
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="gold-accent">‚Ä¢</span>
                                    <div>
                                        <strong class="text-white">Q&A sobre Transa√ß√µes</strong>
                                        <p class="text-xs text-slate-400 mt-0.5">Dados em tempo real do sistema banc√°rio</p>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="card border-orange-900/30">
                            <h4 class="text-lg font-bold text-orange-400 mb-3">
                                <i class="fas fa-check-circle mr-2"></i>Casos Ideais para Fine-tuning
                            </h4>
                            <ul class="space-y-3 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <span class="gold-accent">‚Ä¢</span>
                                    <div>
                                        <strong class="text-white">Gerador de Relat√≥rios</strong>
                                        <p class="text-xs text-slate-400 mt-0.5">Sempre estruturado, formato BACEN</p>
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="gold-accent">‚Ä¢</span>
                                    <div>
                                        <strong class="text-white">Assistente SQL</strong>
                                        <p class="text-xs text-slate-400 mt-0.5">Converter linguagem natural em queries espec√≠ficas do Oracle</p>
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="gold-accent">‚Ä¢</span>
                                    <div>
                                        <strong class="text-white">Classificador de Risco</strong>
                                        <p class="text-xs text-slate-400 mt-0.5">Modelo treinado em hist√≥rico de defaults</p>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderEmbeddings(container) {
            container.innerHTML = `
                <div class="h-full flex flex-col fade-in">
                    <div class="mb-6">
                        <span class="badge badge-blue"><i class="fas fa-project-diagram mr-1"></i>Engenharia de Dados</span>
                        <h1 class="text-3xl font-bold text-white mt-4 mb-2">Embedding Models</h1>
                        <p class="text-slate-400">Transformando texto em vetores num√©ricos para busca sem√¢ntica.</p>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div class="card">
                            <h3 class="text-lg font-bold text-white mb-3">
                                <i class="fas fa-info-circle mr-2 gold-accent"></i>O que s√£o Embeddings?
                            </h3>
                            <p class="text-sm text-slate-300 mb-3">
                                Embeddings s√£o representa√ß√µes vetoriais de texto onde palavras/frases semanticamente similares 
                                ficam pr√≥ximas no espa√ßo vetorial.
                            </p>
                            <div class="bg-slate-800/50 p-3 rounded border border-slate-700 font-mono text-xs">
                                <div class="text-slate-400 mb-1">"Contrato de m√∫tuo"</div>
                                <div class="text-blue-400">‚Üí [0.023, -0.145, 0.891, ..., 0.234]</div>
                                <div class="text-slate-500 text-[10px] mt-1">1536 dimens√µes</div>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="text-lg font-bold text-white mb-3">
                                <i class="fas fa-chart-line mr-2 gold-accent"></i>Comparativo de Modelos
                            </h3>
                            <div class="space-y-2 text-xs">
                                <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded">
                                    <span class="text-slate-300 font-semibold">OpenAI ada-002</span>
                                    <span class="badge badge-green">1536D</span>
                                </div>
                                <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded">
                                    <span class="text-slate-300 font-semibold">Cohere embed-v3</span>
                                    <span class="badge badge-blue">1024D</span>
                                </div>
                                <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded">
                                    <span class="text-slate-300 font-semibold">BGE-large-en</span>
                                    <span class="badge badge-gold">768D</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 bg-slate-900 rounded-xl border border-slate-800 p-4 relative card">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-sm font-bold text-white">
                                <i class="fas fa-cube mr-2"></i>Vector Space Visualization
                            </h3>
                            <div class="text-[10px] text-slate-400 font-mono">
                                1536D ‚Üí 2D (t-SNE)
                            </div>
                        </div>
                        <canvas id="vectorChart"></canvas>
                        
                        <!-- Interactive Panel -->
                        <div class="absolute top-4 right-4 bg-slate-800/95 p-4 rounded-lg border border-slate-700 backdrop-blur w-64 shadow-xl">
                            <h4 class="text-xs font-bold gold-accent uppercase mb-2">
                                <i class="fas fa-search mr-1"></i>Busca Sem√¢ntica
                            </h4>
                            <input type="text" id="query-input" placeholder="Ex: 'Investimento'" class="w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-xs text-white mb-2 focus:border-gold-accent outline-none transition">
                            <button onclick="simulateSearch()" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white text-xs font-bold py-2 rounded transition shadow-lg">
                                <i class="fas fa-calculator mr-1"></i>Calcular Similaridade
                            </button>
                            <div id="search-result" class="mt-3 text-xs text-slate-400 hidden">
                                <div class="flex justify-between border-b border-slate-700 pb-1 mb-2 text-[10px] uppercase font-semibold">
                                    <span>Termo</span>
                                    <span>Score</span>
                                </div>
                                <div class="space-y-1 font-mono text-[11px]">
                                    <div class="flex justify-between"><span class="text-green-400">Lucro</span> <span>0.89</span></div>
                                    <div class="flex justify-between"><span class="text-green-400">Dinheiro</span> <span>0.85</span></div>
                                    <div class="flex justify-between"><span class="text-red-400">Ma√ß√£</span> <span>0.12</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            setTimeout(initVectorChart, 100);
        }

        function renderVectorDBs(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-blue"><i class="fas fa-cubes mr-1"></i>Engenharia de Dados</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Vector Databases</h1>
                        <p class="text-slate-400 text-lg">Armazenamento otimizado para busca por similaridade vetorial.</p>
                    </div>

                    <!-- Comparison Table -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-table mr-2 gold-accent"></i>Comparativo de Solu√ß√µes
                        </h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="border-b-2 border-slate-700">
                                        <th class="text-left p-3 text-slate-400 font-semibold">Solu√ß√£o</th>
                                        <th class="text-left p-3 text-slate-400 font-semibold">Tipo</th>
                                        <th class="text-left p-3 text-slate-400 font-semibold">Escala</th>
                                        <th class="text-left p-3 text-slate-400 font-semibold">Custo</th>
                                        <th class="text-left p-3 text-slate-400 font-semibold">Melhor para</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition">
                                        <td class="p-3 font-bold text-blue-400">ChromaDB</td>
                                        <td class="p-3 text-slate-300">Embarcado</td>
                                        <td class="p-3 text-slate-300">~1M vectors</td>
                                        <td class="p-3 text-green-400">Gratuito</td>
                                        <td class="p-3 text-slate-300">Prot√≥tipos, local dev</td>
                                    </tr>
                                    <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition">
                                        <td class="p-3 font-bold text-purple-400">Pinecone</td>
                                        <td class="p-3 text-slate-300">Cloud SaaS</td>
                                        <td class="p-3 text-slate-300">Bilh√µes</td>
                                        <td class="p-3 text-orange-400">$70+/m√™s</td>
                                        <td class="p-3 text-slate-300">Produ√ß√£o, alta escala</td>
                                    </tr>
                                    <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition">
                                        <td class="p-3 font-bold text-green-400">Weaviate</td>
                                        <td class="p-3 text-slate-300">Self-hosted</td>
                                        <td class="p-3 text-slate-300">Milh√µes</td>
                                        <td class="p-3 text-green-400">Open-source</td>
                                        <td class="p-3 text-slate-300">On-premise, compliance</td>
                                    </tr>
                                    <tr class="border-b border-slate-800 hover:bg-slate-800/30 transition">
                                        <td class="p-3 font-bold text-yellow-400">Qdrant</td>
                                        <td class="p-3 text-slate-300">Self/Cloud</td>
                                        <td class="p-3 text-slate-300">Milh√µes</td>
                                        <td class="p-3 text-blue-400">Vari√°vel</td>
                                        <td class="p-3 text-slate-300">Performance, Rust</td>
                                    </tr>
                                    <tr class="hover:bg-slate-800/30 transition">
                                        <td class="p-3 font-bold text-red-400">FAISS (Meta)</td>
                                        <td class="p-3 text-slate-300">Biblioteca</td>
                                        <td class="p-3 text-slate-300">Milh√µes</td>
                                        <td class="p-3 text-green-400">Gratuito</td>
                                        <td class="p-3 text-slate-300">Research, embeddings</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ChromaDB Focus -->
                    <div class="grid md:grid-cols-2 gap-6 mb-8">
                        <div class="card border-blue-900/30">
                            <h3 class="text-lg font-bold text-blue-400 mb-4">
                                <i class="fas fa-database mr-2"></i>Por que ChromaDB?
                            </h3>
                            <ul class="space-y-3 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <div>
                                        <strong class="text-white">Zero Setup:</strong> Pip install e pronto, sem servidor externo
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <div>
                                        <strong class="text-white">Python-First:</strong> API intuitiva, integra√ß√£o direta com LangChain
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <div>
                                        <strong class="text-white">Metadata Filtering:</strong> Filtros por data, tipo, autor
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <div>
                                        <strong class="text-white">Persist√™ncia:</strong> SQLite embarcado, n√£o precisa de DB externo
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="card border-purple-900/30">
                            <h3 class="text-lg font-bold text-purple-400 mb-4">
                                <i class="fas fa-rocket mr-2"></i>Quando migrar para Pinecone?
                            </h3>
                            <ul class="space-y-3 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <span class="gold-accent text-lg">‚Üí</span>
                                    <div>
                                        <strong class="text-white">Escala:</strong> Mais de 10M de vetores
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="gold-accent text-lg">‚Üí</span>
                                    <div>
                                        <strong class="text-white">Lat√™ncia:</strong> Precisa de &lt;50ms de resposta
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="gold-accent text-lg">‚Üí</span>
                                    <div>
                                        <strong class="text-white">Multi-tenancy:</strong> Milhares de collections isoladas
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="gold-accent text-lg">‚Üí</span>
                                    <div>
                                        <strong class="text-white">Produ√ß√£o:</strong> SLA, backups autom√°ticos, suporte
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Index Types -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-network-wired mr-2 gold-accent"></i>Algoritmos de Indexa√ß√£o
                        </h3>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <h4 class="font-bold text-white mb-2 text-sm">Flat (Brute Force)</h4>
                                <div class="space-y-2 text-xs text-slate-300">
                                    <div><strong>Precis√£o:</strong> 100% (exato)</div>
                                    <div><strong>Velocidade:</strong> O(N) - lento</div>
                                    <div><strong>Uso:</strong> &lt;10k vectors</div>
                                </div>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <h4 class="font-bold text-white mb-2 text-sm">HNSW (Hierarchical)</h4>
                                <div class="space-y-2 text-xs text-slate-300">
                                    <div><strong>Precis√£o:</strong> ~95% (aproximado)</div>
                                    <div><strong>Velocidade:</strong> O(log N) - r√°pido</div>
                                    <div><strong>Uso:</strong> Padr√£o da ind√∫stria</div>
                                </div>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <h4 class="font-bold text-white mb-2 text-sm">IVF (Inverted File)</h4>
                                <div class="space-y-2 text-xs text-slate-300">
                                    <div><strong>Precis√£o:</strong> ~90% (aproximado)</div>
                                    <div><strong>Velocidade:</strong> O(‚àöN) - muito r√°pido</div>
                                    <div><strong>Uso:</strong> Bilh√µes de vectors</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // === RAG AVAN√áADO ===

        function renderHybridSearch(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-gold"><i class="fas fa-rocket mr-1"></i>RAG Avan√ßado</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Hybrid Search</h1>
                        <p class="text-slate-400 text-lg">Combinando Dense Retrieval (sem√¢ntico) com Sparse Retrieval (keyword) para melhor precis√£o.</p>
                    </div>

                    <!-- Concept -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-lightbulb mr-2 gold-accent"></i>O Problema da Busca Puramente Sem√¢ntica
                        </h3>
                        <p class="text-slate-300 mb-4">
                            Embeddings capturam <strong>significado</strong>, mas podem falhar em buscas exatas de n√∫meros, 
                            c√≥digos ou nomes pr√≥prios espec√≠ficos.
                        </p>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-red-900/20 border border-red-800/50 p-4 rounded-lg">
                                <h4 class="text-red-400 font-bold text-sm mb-2">
                                    <i class="fas fa-times-circle mr-1"></i>Falha Sem√¢ntica
                                </h4>
                                <p class="text-xs text-slate-300 mb-2">Query: <em>"Contrato matr√≠cula 12345"</em></p>
                                <p class="text-xs text-slate-400">
                                    Pode retornar "Contrato matr√≠cula 54321" porque semanticamente √© similar, 
                                    mas o <strong>n√∫mero exato</strong> √© ignorado.
                                </p>
                            </div>
                            <div class="bg-green-900/20 border border-green-800/50 p-4 rounded-lg">
                                <h4 class="text-green-400 font-bold text-sm mb-2">
                                    <i class="fas fa-check-circle mr-1"></i>Solu√ß√£o H√≠brida
                                </h4>
                                <p class="text-xs text-slate-300 mb-2">Dense (70%) + Sparse (30%)</p>
                                <p class="text-xs text-slate-400">
                                    Busca sem√¢ntica + keyword matching garante que "12345" seja encontrado exatamente.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Architecture -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-project-diagram mr-2 gold-accent"></i>Arquitetura Hybrid Search
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center gap-4">
                                <div class="bg-blue-900/30 border border-blue-800/50 rounded-lg p-4 text-center w-48">
                                    <div class="text-2xl mb-2">üîç</div>
                                    <div class="text-sm font-bold text-blue-400">Query</div>
                                    <div class="text-xs text-slate-400 mt-1">"Garantia im√≥vel 12345"</div>
                                </div>
                                <div class="flex-1 flex flex-col gap-3">
                                    <div class="flex items-center gap-3">
                                        <div class="flex-1 bg-purple-900/20 border border-purple-800/50 rounded-lg p-3">
                                            <div class="text-xs font-bold text-purple-400 mb-1">Dense (Embedding)</div>
                                            <div class="font-mono text-[10px] text-slate-400">[0.12, -0.45, ..., 0.78]</div>
                                        </div>
                                        <div class="text-slate-500">70%</div>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <div class="flex-1 bg-orange-900/20 border border-orange-800/50 rounded-lg p-3">
                                            <div class="text-xs font-bold text-orange-400 mb-1">Sparse (BM25/TF-IDF)</div>
                                            <div class="font-mono text-[10px] text-slate-400">["garantia": 0.8, "12345": 1.0]</div>
                                        </div>
                                        <div class="text-slate-500">30%</div>
                                    </div>
                                </div>
                                <div class="text-3xl gold-accent">‚Üí</div>
                                <div class="bg-green-900/30 border border-green-800/50 rounded-lg p-4 text-center w-48">
                                    <div class="text-2xl mb-2">‚úÖ</div>
                                    <div class="text-sm font-bold text-green-400">Merged Results</div>
                                    <div class="text-xs text-slate-400 mt-1">Score: 0.94</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Implementation -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-code mr-2 gold-accent"></i>Quando Usar?
                        </h3>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">üî¢</div>
                                <h4 class="font-bold text-white text-sm mb-2">Identificadores √önicos</h4>
                                <p class="text-xs text-slate-400">CPF, CNPJ, matr√≠cula, protocolo</p>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">üìÖ</div>
                                <h4 class="font-bold text-white text-sm mb-2">Datas Espec√≠ficas</h4>
                                <p class="text-xs text-slate-400">"contratos de 2024", "vencimento 15/03"</p>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">üë§</div>
                                <h4 class="font-bold text-white text-sm mb-2">Nomes Pr√≥prios</h4>
                                <p class="text-xs text-slate-400">Pessoas, empresas, lugares espec√≠ficos</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderReranking(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-gold"><i class="fas fa-rocket mr-1"></i>RAG Avan√ßado</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Re-ranking</h1>
                        <p class="text-slate-400 text-lg">Melhorando a precis√£o dos resultados com Cross-Encoders e Cohere Rerank.</p>
                    </div>

                    <!-- Problem -->
                    <div class="card mb-8 border-orange-900/30">
                        <h3 class="text-xl font-bold text-orange-400 mb-4">
                            <i class="fas fa-exclamation-triangle mr-2"></i>Limita√ß√£o da Busca Vetorial Simples
                        </h3>
                        <p class="text-slate-300 mb-4">
                            Embeddings capturam similaridade <strong>bi-encoder</strong>: Query e Document s√£o codificados 
                            <em>independentemente</em>. Isso √© r√°pido mas perde intera√ß√£o contextual.
                        </p>
                        <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                            <div class="grid md:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <div class="text-blue-400 font-bold mb-2">Bi-Encoder (R√°pido)</div>
                                    <div class="font-mono text-xs text-slate-400">
                                        encode(query) ‚Üí [0.1, 0.5, ...]<br>
                                        encode(doc) ‚Üí [0.2, 0.4, ...]<br>
                                        <span class="text-green-400">cosine(query, doc) = 0.87</span>
                                    </div>
                                    <div class="text-[10px] text-slate-500 mt-2">‚ö° Milh√µes de docs em ~100ms</div>
                                </div>
                                <div>
                                    <div class="text-purple-400 font-bold mb-2">Cross-Encoder (Preciso)</div>
                                    <div class="font-mono text-xs text-slate-400">
                                        encode(query + doc together) ‚Üí<br>
                                        <span class="text-green-400">relevance_score = 0.92</span>
                                    </div>
                                    <div class="text-[10px] text-slate-500 mt-2">üê¢ Apenas top-K docs (mais lento)</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Two-Stage Pipeline -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-layer-group mr-2 gold-accent"></i>Pipeline de 2 Est√°gios
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center gap-4">
                                <div class="bg-blue-900/30 border border-blue-800/50 rounded-lg p-4 flex-1">
                                    <div class="text-xs font-bold text-blue-400 uppercase mb-2">Stage 1: Retrieval (Bi-Encoder)</div>
                                    <p class="text-xs text-slate-300">Busca r√°pida no ChromaDB ‚Üí Retorna top-100 candidatos</p>
                                    <div class="mt-2 text-[10px] text-slate-500">‚è±Ô∏è ~50ms | Recall: 85%</div>
                                </div>
                                <div class="text-2xl gold-accent">‚Üí</div>
                                <div class="bg-purple-900/30 border border-purple-800/50 rounded-lg p-4 flex-1">
                                    <div class="text-xs font-bold text-purple-400 uppercase mb-2">Stage 2: Re-ranking (Cross-Encoder)</div>
                                    <p class="text-xs text-slate-300">Re-score top-100 com contexto completo ‚Üí Retorna top-5</p>
                                    <div class="mt-2 text-[10px] text-slate-500">‚è±Ô∏è ~200ms | Precision@5: 95%</div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 p-4 bg-green-900/20 border border-green-800/50 rounded-lg">
                            <p class="text-sm text-green-300">
                                <i class="fas fa-check-circle mr-2"></i>
                                <strong>Resultado:</strong> Melhor dos dois mundos - velocidade do bi-encoder + precis√£o do cross-encoder
                            </p>
                        </div>
                    </div>

                    <!-- Cohere Rerank -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="card border-purple-900/30">
                            <h3 class="text-lg font-bold text-purple-400 mb-3">
                                <i class="fas fa-star mr-2"></i>Cohere Rerank API
                            </h3>
                            <p class="text-sm text-slate-300 mb-3">
                                Servi√ßo managed de re-ranking. Envie query + top-100 docs, receba scores otimizados.
                            </p>
                            <div class="space-y-2 text-xs">
                                <div class="flex justify-between p-2 bg-slate-800/50 rounded">
                                    <span class="text-slate-400">Custo:</span>
                                    <span class="text-white font-semibold">$2/1k searches</span>
                                </div>
                                <div class="flex justify-between p-2 bg-slate-800/50 rounded">
                                    <span class="text-slate-400">Lat√™ncia:</span>
                                    <span class="text-white font-semibold">~200-300ms</span>
                                </div>
                                <div class="flex justify-between p-2 bg-slate-800/50 rounded">
                                    <span class="text-slate-400">Suporte:</span>
                                    <span class="text-white font-semibold">100+ idiomas</span>
                                </div>
                            </div>
                        </div>

                        <div class="card border-blue-900/30">
                            <h3 class="text-lg font-bold text-blue-400 mb-3">
                                <i class="fas fa-server mr-2"></i>Cross-Encoder Self-Hosted
                            </h3>
                            <p class="text-sm text-slate-300 mb-3">
                                Modelos open-source (HuggingFace): <code class="text-xs bg-slate-800 px-1 py-0.5 rounded">cross-encoder/ms-marco-MiniLM-L-6-v2</code>
                            </p>
                            <ul class="space-y-2 text-xs text-slate-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <span><strong>Custo:</strong> Zero (GPU pr√≥pria)</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <span><strong>Privacidade:</strong> Dados n√£o saem do data center</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-times text-red-400 mt-1"></i>
                                    <span><strong>Manuten√ß√£o:</strong> Precisa gerenciar infra</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderHyDE(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-gold"><i class="fas fa-rocket mr-1"></i>RAG Avan√ßado</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">HyDE</h1>
                        <p class="text-slate-400 text-lg">Hypothetical Document Embeddings: Gerando documentos sint√©ticos para melhorar a busca.</p>
                    </div>

                    <!-- Core Concept -->
                    <div class="card mb-8 border-purple-900/30">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-magic mr-2 gold-accent"></i>A Ideia Central
                        </h3>
                        <p class="text-slate-300 mb-4">
                            <strong>Problema:</strong> A query do usu√°rio √© curta e pode n√£o ter overlap sem√¢ntico com os documentos.
                        </p>
                        <p class="text-slate-300 mb-4">
                            <strong>Solu√ß√£o HyDE:</strong> Use o LLM para <em>gerar uma resposta hipot√©tica</em> √† query, 
                            ent√£o busque documentos similares a essa resposta (n√£o √† query original).
                        </p>
                        <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                            <div class="grid md:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <div class="text-red-400 font-bold mb-2">‚ùå Busca Tradicional</div>
                                    <div class="text-xs text-slate-300 mb-2">Query: <em>"Quais as garantias?"</em></div>
                                    <div class="font-mono text-[10px] text-slate-400">
                                        embed("Quais as garantias?") ‚Üí<br>
                                        Busca no DB
                                    </div>
                                    <div class="text-[10px] text-red-400 mt-2">Poucas palavras-chave para match</div>
                                </div>
                                <div>
                                    <div class="text-green-400 font-bold mb-2">‚úÖ HyDE</div>
                                    <div class="text-xs text-slate-300 mb-2">Query: <em>"Quais as garantias?"</em></div>
                                    <div class="font-mono text-[10px] text-slate-400">
                                        LLM gera: "Aliena√ß√£o fiduci√°ria de im√≥vel..."<br>
                                        embed(resposta_hipot√©tica) ‚Üí Busca
                                    </div>
                                    <div class="text-[10px] text-green-400 mt-2">Mais contexto sem√¢ntico para match</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pipeline -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-flow-chart mr-2 gold-accent"></i>Pipeline HyDE
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center gap-3">
                                <div class="bg-blue-900/30 border border-blue-800/50 rounded-lg p-3 w-48 text-center">
                                    <div class="text-xs font-bold text-blue-400 mb-1">1. User Query</div>
                                    <div class="text-[10px] text-slate-300">"Garantias do contrato?"</div>
                                </div>
                                <div class="text-xl gold-accent">‚Üí</div>
                                <div class="bg-purple-900/30 border border-purple-800/50 rounded-lg p-3 flex-1">
                                    <div class="text-xs font-bold text-purple-400 mb-1">2. LLM Generation</div>
                                    <div class="text-[10px] text-slate-300 font-mono">
                                        Prompt: "Imagine uma resposta sobre garantias de contratos..."<br>
                                        LLM: "A garantia t√≠pica √© aliena√ß√£o fiduci√°ria de im√≥vel comercial..."
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="bg-orange-900/30 border border-orange-800/50 rounded-lg p-3 flex-1">
                                    <div class="text-xs font-bold text-orange-400 mb-1">3. Embedding</div>
                                    <div class="text-[10px] text-slate-300 font-mono">
                                        embed(resposta_hipot√©tica) ‚Üí [0.23, -0.45, ..., 0.89]
                                    </div>
                                </div>
                                <div class="text-xl gold-accent">‚Üí</div>
                                <div class="bg-green-900/30 border border-green-800/50 rounded-lg p-3 w-48 text-center">
                                    <div class="text-xs font-bold text-green-400 mb-1">4. Retrieval</div>
                                    <div class="text-[10px] text-slate-300">Top-5 docs similares</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pros/Cons -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="card border-green-900/30">
                            <h3 class="text-lg font-bold text-green-400 mb-3">
                                <i class="fas fa-thumbs-up mr-2"></i>Vantagens
                            </h3>
                            <ul class="space-y-2 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <span>Queries curtas viram documentos ricos em contexto</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <span>Melhora recall quando vocabul√°rio √© diferente</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <span>Funciona bem com dom√≠nios t√©cnicos</span>
                                </li>
                            </ul>
                        </div>

                        <div class="card border-red-900/30">
                            <h3 class="text-lg font-bold text-red-400 mb-3">
                                <i class="fas fa-exclamation-triangle mr-2"></i>Trade-offs
                            </h3>
                            <ul class="space-y-2 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-times text-red-400 mt-1"></i>
                                    <span>Adiciona lat√™ncia (1 chamada extra ao LLM)</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-times text-red-400 mt-1"></i>
                                    <span>Aumenta custo (~$0.002 por query)</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-times text-red-400 mt-1"></i>
                                    <span>LLM pode "alucinar" na resposta hipot√©tica</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderParentChild(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-gold"><i class="fas fa-rocket mr-1"></i>RAG Avan√ßado</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Parent-Child Chunking</h1>
                        <p class="text-slate-400 text-lg">Busca em chunks pequenos, retorna contexto completo dos pais.</p>
                    </div>

                    <!-- Problem -->
                    <div class="card mb-8 border-orange-900/30">
                        <h3 class="text-xl font-bold text-orange-400 mb-4">
                            <i class="fas fa-puzzle-piece mr-2"></i>O Dilema do Chunk Size
                        </h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <h4 class="text-red-400 font-bold text-sm mb-2">Chunks Pequenos (100 tokens)</h4>
                                <ul class="space-y-2 text-xs text-slate-300">
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">+</span>
                                        <span>Alta precis√£o na busca</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-red-400">-</span>
                                        <span>Falta contexto (LLM n√£o entende o par√°grafo anterior)</span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <h4 class="text-blue-400 font-bold text-sm mb-2">Chunks Grandes (500 tokens)</h4>
                                <ul class="space-y-2 text-xs text-slate-300">
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">+</span>
                                        <span>Contexto completo para o LLM</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-red-400">-</span>
                                        <span>Busca menos precisa (muito "ru√≠do")</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Solution -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-sitemap mr-2 gold-accent"></i>Hierarquia Parent-Child
                        </h3>
                        <div class="bg-slate-800/50 p-6 rounded-lg border border-slate-700">
                            <div class="space-y-4">
                                <div class="flex items-start gap-4">
                                    <div class="bg-blue-900/30 border-2 border-blue-800/50 rounded-lg p-4 flex-1">
                                        <div class="text-sm font-bold text-blue-400 mb-2">
                                            <i class="fas fa-file-alt mr-2"></i>Parent Chunk (500 tokens)
                                        </div>
                                        <div class="text-xs text-slate-300 font-mono bg-slate-900/50 p-2 rounded">
                                            "CL√ÅUSULA QUARTA - DAS GARANTIAS<br>
                                            4.1. Como garantia fiel do cumprimento das obriga√ß√µes...<br>
                                            4.2. O im√≥vel dever√° estar livre de √¥nus...<br>
                                            4.3. A MUTU√ÅRIA se compromete..."
                                        </div>
                                        <div class="text-[10px] text-slate-500 mt-2">ID: parent_123 | Armazenado mas N√ÉO indexado</div>
                                    </div>
                                </div>
                                <div class="flex justify-center">
                                    <div class="text-2xl gold-accent">‚Üì divide em ‚Üì</div>
                                </div>
                                <div class="grid md:grid-cols-3 gap-3">
                                    <div class="bg-green-900/30 border border-green-800/50 rounded-lg p-3">
                                        <div class="text-xs font-bold text-green-400 mb-2">Child 1 (100 tokens)</div>
                                        <div class="text-[10px] text-slate-300 font-mono">
                                            "4.1. Como garantia fiel..."
                                        </div>
                                        <div class="text-[9px] text-slate-500 mt-1">parent_id: parent_123</div>
                                    </div>
                                    <div class="bg-green-900/30 border border-green-800/50 rounded-lg p-3">
                                        <div class="text-xs font-bold text-green-400 mb-2">Child 2 (100 tokens)</div>
                                        <div class="text-[10px] text-slate-300 font-mono">
                                            "4.2. O im√≥vel dever√°..."
                                        </div>
                                        <div class="text-[9px] text-slate-500 mt-1">parent_id: parent_123</div>
                                    </div>
                                    <div class="bg-green-900/30 border border-green-800/50 rounded-lg p-3">
                                        <div class="text-xs font-bold text-green-400 mb-2">Child 3 (100 tokens)</div>
                                        <div class="text-[10px] text-slate-300 font-mono">
                                            "4.3. A MUTU√ÅRIA se..."
                                        </div>
                                        <div class="text-[9px] text-slate-500 mt-1">parent_id: parent_123</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 p-4 bg-purple-900/20 border border-purple-800/50 rounded-lg">
                            <p class="text-sm text-purple-300">
                                <i class="fas fa-lightbulb mr-2"></i>
                                <strong>Estrat√©gia:</strong> Indexe apenas os <strong>children</strong> no vector DB. 
                                Quando encontrar match, retorne o <strong>parent</strong> completo para o LLM.
                            </p>
                        </div>
                    </div>

                    <!-- Workflow -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-list-ol mr-2 gold-accent"></i>Workflow na Pr√°tica
                        </h3>
                        <div class="space-y-3">
                            <div class="flex items-center gap-3">
                                <div class="bg-blue-900/30 border border-blue-800/50 rounded-full w-8 h-8 flex items-center justify-center text-xs font-bold text-blue-400">1</div>
                                <div class="flex-1 text-sm text-slate-300">
                                    User query: <em>"Quais garantias do contrato?"</em>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="bg-green-900/30 border border-green-800/50 rounded-full w-8 h-8 flex items-center justify-center text-xs font-bold text-green-400">2</div>
                                <div class="flex-1 text-sm text-slate-300">
                                    Busca no ChromaDB encontra <strong>Child 1</strong> (score: 0.92)
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="bg-purple-900/30 border border-purple-800/50 rounded-full w-8 h-8 flex items-center justify-center text-xs font-bold text-purple-400">3</div>
                                <div class="flex-1 text-sm text-slate-300">
                                    Sistema recupera <code class="text-xs bg-slate-800 px-1 rounded">parent_123</code> do armazenamento
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="bg-orange-900/30 border border-orange-800/50 rounded-full w-8 h-8 flex items-center justify-center text-xs font-bold text-orange-400">4</div>
                                <div class="flex-1 text-slate-300">
                                    Envia <strong>Parent Chunk completo</strong> (500 tokens) para o LLM
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Benefits -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-star mr-2 gold-accent"></i>Por que usar no Ita√∫?
                        </h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-green-900/20 border border-green-800/50 p-4 rounded-lg">
                                <h4 class="text-green-400 font-bold text-sm mb-2">Documentos Jur√≠dicos</h4>
                                <p class="text-xs text-slate-300">
                                    Contratos t√™m cl√°usulas numeradas. Busca precisa em 4.1, mas LLM precisa ver toda a CL√ÅUSULA QUARTA.
                                </p>
                            </div>
                            <div class="bg-blue-900/20 border border-blue-800/50 p-4 rounded-lg">
                                <h4 class="text-blue-400 font-bold text-sm mb-2">Manuais T√©cnicos</h4>
                                <p class="text-xs text-slate-300">
                                    Procedimento tem 10 passos. Busca no passo 5, mas retorna se√ß√£o completa para contexto.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderRAPTOR(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-gold"><i class="fas fa-rocket mr-1"></i>RAG Avan√ßado</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">RAPTOR</h1>
                        <p class="text-slate-400 text-lg">Recursive Abstractive Processing for Tree-Organized Retrieval. Sumariza√ß√µes hier√°rquicas para perguntas de alto n√≠vel.</p>
                    </div>

                    <!-- Problem -->
                    <div class="card mb-8 border-red-900/30">
                        <h3 class="text-xl font-bold text-red-400 mb-4">
                            <i class="fas fa-question-circle mr-2"></i>Limita√ß√£o do RAG Tradicional
                        </h3>
                        <p class="text-slate-300 mb-4">
                            RAG padr√£o √© excelente para perguntas <strong>espec√≠ficas</strong> ("Qual a garantia da cl√°usula 4?"), 
                            mas falha em perguntas <strong>conceituais/abrangentes</strong>.
                        </p>
                        <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                            <div class="text-sm text-slate-300 mb-2">
                                <strong>Exemplo de Falha:</strong>
                            </div>
                            <div class="text-xs text-slate-400 font-mono">
                                User: "Qual o tema principal deste conjunto de 50 contratos?"<br><br>
                                RAG Tradicional:<br>
                                ‚Üí Busca retorna 5 chunks aleat√≥rios de contratos diferentes<br>
                                ‚Üí LLM n√£o consegue ver o "panorama geral"<br>
                                ‚Üí Resposta √© superficial ou incorreta
                            </div>
                        </div>
                    </div>

                    <!-- Solution -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-tree mr-2 gold-accent"></i>Hierarquia RAPTOR
                        </h3>
                        <p class="text-slate-300 mb-6">
                            RAPTOR cria uma <strong>√°rvore de sumariza√ß√µes</strong> em m√∫ltiplos n√≠veis de abstra√ß√£o.
                        </p>
                        <div class="bg-slate-800/50 p-6 rounded-lg border border-slate-700">
                            <div class="space-y-6">
                                <!-- Level 0 -->
                                <div>
                                    <div class="text-xs font-bold text-slate-400 uppercase mb-3">Level 0: Chunks Originais</div>
                                    <div class="grid grid-cols-8 gap-2">
                                        ${Array(8).fill(0).map((_, i) => `
                                            <div class="bg-blue-900/30 border border-blue-800/50 rounded p-2 text-center">
                                                <div class="text-[9px] text-blue-400 font-bold">C${i+1}</div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                                
                                <!-- Arrow -->
                                <div class="flex justify-center">
                                    <div class="text-sm gold-accent">‚Üì LLM sumariza clusters ‚Üì</div>
                                </div>
                                
                                <!-- Level 1 -->
                                <div>
                                    <div class="text-xs font-bold text-slate-400 uppercase mb-3">Level 1: Sum√°rios Intermedi√°rios</div>
                                    <div class="grid grid-cols-4 gap-3">
                                        ${Array(4).fill(0).map((_, i) => `
                                            <div class="bg-purple-900/30 border border-purple-800/50 rounded p-3 text-center">
                                                <div class="text-[10px] text-purple-400 font-bold mb-1">S${i+1}</div>
                                                <div class="text-[8px] text-slate-400">Resumo de C${i*2+1}-C${i*2+2}</div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                                
                                <!-- Arrow -->
                                <div class="flex justify-center">
                                    <div class="text-sm gold-accent">‚Üì LLM sumariza novamente ‚Üì</div>
                                </div>
                                
                                <!-- Level 2 -->
                                <div>
                                    <div class="text-xs font-bold text-slate-400 uppercase mb-3">Level 2: Sum√°rio Geral</div>
                                    <div class="flex justify-center">
                                        <div class="bg-green-900/30 border-2 border-green-800/50 rounded-lg p-4 text-center w-64">
                                            <div class="text-sm text-green-400 font-bold mb-2">SUM√ÅRIO FINAL</div>
                                            <div class="text-[10px] text-slate-300">Vis√£o panor√¢mica de todos os 8 chunks</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- How It Works -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-cogs mr-2 gold-accent"></i>Como Funciona na Query?
                        </h3>
                        <div class="space-y-4">
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-sm font-bold text-blue-400 mb-2">Pergunta Espec√≠fica:</div>
                                <div class="text-xs text-slate-300 mb-2">"Qual o valor da multa na cl√°usula 5?"</div>
                                <div class="text-[10px] text-slate-400">
                                    ‚Üí Busca no <strong>Level 0</strong> (chunks originais)<br>
                                    ‚Üí Retorna chunk espec√≠fico com resposta precisa
                                </div>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-sm font-bold text-purple-400 mb-2">Pergunta Intermedi√°ria:</div>
                                <div class="text-xs text-slate-300 mb-2">"Quais os principais riscos deste contrato?"</div>
                                <div class="text-[10px] text-slate-400">
                                    ‚Üí Busca no <strong>Level 1</strong> (sum√°rios de se√ß√µes)<br>
                                    ‚Üí Retorna sum√°rios que consolidam m√∫ltiplas cl√°usulas
                                </div>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-sm font-bold text-green-400 mb-2">Pergunta Abrangente:</div>
                                <div class="text-xs text-slate-300 mb-2">"Qual o padr√£o de risco em todos os contratos de 2024?"</div>
                                <div class="text-[10px] text-slate-400">
                                    ‚Üí Busca no <strong>Level 2</strong> (sum√°rio geral)<br>
                                    ‚Üí Retorna vis√£o consolidada de alto n√≠vel
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Trade-offs -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="card border-green-900/30">
                            <h3 class="text-lg font-bold text-green-400 mb-3">
                                <i class="fas fa-thumbs-up mr-2"></i>Vantagens
                            </h3>
                            <ul class="space-y-2 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <span>Responde perguntas conceituais/estrat√©gicas</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <span>Reduz informa√ß√£o irrelevante (foco nos sum√°rios)</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <span>Escal√°vel para grandes corpora (milhares de docs)</span>
                                </li>
                            </ul>
                        </div>

                        <div class="card border-orange-900/30">
                            <h3 class="text-lg font-bold text-orange-400 mb-3">
                                <i class="fas fa-exclamation-triangle mr-2"></i>Trade-offs
                            </h3>
                            <ul class="space-y-2 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-times text-red-400 mt-1"></i>
                                    <span>Setup complexo (gerar √°rvore de sum√°rios)</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-times text-red-400 mt-1"></i>
                                    <span>Custo alto (LLM sumariza cada cluster)</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-times text-red-400 mt-1"></i>
                                    <span>Sum√°rios podem perder detalhes importantes</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        // === AGENTES ===

        function renderReActPattern(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-green"><i class="fas fa-robot mr-1"></i>Agentes LangChain</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">ReAct Pattern</h1>
                        <p class="text-slate-400 text-lg">Reasoning + Acting: Agentes que pensam antes de agir.</p>
                    </div>

                    <!-- Core Concept -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-brain mr-2 gold-accent"></i>O que √© ReAct?
                        </h3>
                        <p class="text-slate-300 mb-4">
                            <strong>ReAct</strong> = <strong>Rea</strong>soning + <strong>Act</strong>ion. √â um padr√£o onde o agente 
                            alterna entre <em>pensar</em> (reasoning) e <em>agir</em> (tool calling) iterativamente at√© resolver o problema.
                        </p>
                        <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                            <div class="grid md:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <div class="text-red-400 font-bold mb-2">‚ùå Sem ReAct (Chain simples)</div>
                                    <div class="text-xs text-slate-300 font-mono">
                                        User: "Qual o c√¢mbio e converta $100"<br><br>
                                        LLM: "A taxa √© aproximadamente 5.2..."<br>
                                        ‚ùå N√£o chama API, alucina
                                    </div>
                                </div>
                                <div>
                                    <div class="text-green-400 font-bold mb-2">‚úÖ Com ReAct</div>
                                    <div class="text-xs text-slate-300 font-mono">
                                        Thought: "Preciso buscar taxa atual"<br>
                                        Action: get_exchange_rate()<br>
                                        Observation: 5.24<br>
                                        Thought: "Agora multiplico"<br>
                                        Final Answer: R$ 524,00
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Loop Structure -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-sync-alt mr-2 gold-accent"></i>Loop Thought ‚Üí Action ‚Üí Observation
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-start gap-4">
                                <div class="bg-blue-900/30 border-2 border-blue-800/50 rounded-lg p-4 w-48 text-center">
                                    <div class="text-xl mb-2">üí≠</div>
                                    <div class="text-sm font-bold text-blue-400">Thought</div>
                                    <div class="text-[10px] text-slate-400 mt-1">LLM raciocina sobre o problema</div>
                                </div>
                                <div class="flex-1 bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                    <div class="text-xs text-slate-300 font-mono">
                                        "I need to find the customer's account balance first, then check if there are pending transactions."
                                    </div>
                                </div>
                            </div>

                            <div class="flex items-center justify-center">
                                <div class="text-2xl gold-accent">‚Üì</div>
                            </div>

                            <div class="flex items-start gap-4">
                                <div class="bg-purple-900/30 border-2 border-purple-800/50 rounded-lg p-4 w-48 text-center">
                                    <div class="text-xl mb-2">‚ö°</div>
                                    <div class="text-sm font-bold text-purple-400">Action</div>
                                    <div class="text-[10px] text-slate-400 mt-1">Chama ferramenta espec√≠fica</div>
                                </div>
                                <div class="flex-1 bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                    <div class="text-xs text-slate-300 font-mono">
                                        Action: get_account_balance<br>
                                        Action Input: {"customer_id": "12345"}
                                    </div>
                                </div>
                            </div>

                            <div class="flex items-center justify-center">
                                <div class="text-2xl gold-accent">‚Üì</div>
                            </div>

                            <div class="flex items-start gap-4">
                                <div class="bg-green-900/30 border-2 border-green-800/50 rounded-lg p-4 w-48 text-center">
                                    <div class="text-xl mb-2">üëÅÔ∏è</div>
                                    <div class="text-sm font-bold text-green-400">Observation</div>
                                    <div class="text-[10px] text-slate-400 mt-1">Resultado da ferramenta</div>
                                </div>
                                <div class="flex-1 bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                    <div class="text-xs text-slate-300 font-mono">
                                        Observation: Balance is R$ 5,420.30
                                    </div>
                                </div>
                            </div>

                            <div class="flex items-center justify-center">
                                <div class="text-2xl gold-accent">‚Üª Repeat at√© ter resposta final</div>
                            </div>
                        </div>
                    </div>

                    <!-- Example Trace -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-list-ol mr-2 gold-accent"></i>Exemplo: An√°lise de Cr√©dito
                        </h3>
                        <div class="bg-slate-900 p-4 rounded-lg font-mono text-xs space-y-3">
                            <div class="flex gap-3">
                                <span class="text-blue-400 font-bold">Thought 1:</span>
                                <span class="text-slate-300">I need to get the customer's credit history first.</span>
                            </div>
                            <div class="flex gap-3">
                                <span class="text-purple-400 font-bold">Action 1:</span>
                                <span class="text-slate-300">get_credit_history(cpf="123.456.789-00")</span>
                            </div>
                            <div class="flex gap-3">
                                <span class="text-green-400 font-bold">Observation 1:</span>
                                <span class="text-slate-300">Score: 720, No defaults in 5 years</span>
                            </div>
                            <div class="border-t border-slate-800 pt-3 flex gap-3">
                                <span class="text-blue-400 font-bold">Thought 2:</span>
                                <span class="text-slate-300">Good score. Now check current income.</span>
                            </div>
                            <div class="flex gap-3">
                                <span class="text-purple-400 font-bold">Action 2:</span>
                                <span class="text-slate-300">get_income_data(cpf="123.456.789-00")</span>
                            </div>
                            <div class="flex gap-3">
                                <span class="text-green-400 font-bold">Observation 2:</span>
                                <span class="text-slate-300">Monthly income: R$ 12,000</span>
                            </div>
                            <div class="border-t border-slate-800 pt-3 flex gap-3">
                                <span class="text-blue-400 font-bold">Thought 3:</span>
                                <span class="text-slate-300">I have all needed info. Score is good and income is sufficient.</span>
                            </div>
                            <div class="flex gap-3">
                                <span class="gold-accent font-bold">Final Answer:</span>
                                <span class="text-white">‚úÖ APROVADO - Limite sugerido: R$ 25,000</span>
                            </div>
                        </div>
                    </div>

                    <!-- Benefits -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="card border-green-900/30">
                            <h3 class="text-lg font-bold text-green-400 mb-3">
                                <i class="fas fa-check-circle mr-2"></i>Vantagens do ReAct
                            </h3>
                            <ul class="space-y-2 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <span>LLM "explica" seu racioc√≠nio (interpret√°vel)</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <span>Pode se auto-corrigir entre itera√ß√µes</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-400 mt-1"></i>
                                    <span>Funciona com qualquer LLM (GPT-4, Claude)</span>
                                </li>
                            </ul>
                        </div>

                        <div class="card border-orange-900/30">
                            <h3 class="text-lg font-bold text-orange-400 mb-3">
                                <i class="fas fa-exclamation-triangle mr-2"></i>Desafios
                            </h3>
                            <ul class="space-y-2 text-sm text-slate-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-times text-red-400 mt-1"></i>
                                    <span>Pode entrar em loops infinitos (precisa max_iterations)</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-times text-red-400 mt-1"></i>
                                    <span>Custo alto (m√∫ltiplas chamadas ao LLM)</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-times text-red-400 mt-1"></i>
                                    <span>Lat√™ncia vari√°vel (depende do n√∫mero de steps)</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderToolCalling(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-green"><i class="fas fa-robot mr-1"></i>Agentes LangChain</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Tool Calling & Function Calling</h1>
                        <p class="text-slate-400 text-lg">Integrando LLMs com APIs externas e sistemas banc√°rios.</p>
                    </div>

                    <!-- Concept -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-tools mr-2 gold-accent"></i>O que s√£o Tools?
                        </h3>
                        <p class="text-slate-300 mb-4">
                            <strong>Tools</strong> s√£o fun√ß√µes Python que o agente pode chamar para realizar a√ß√µes no mundo real: 
                            consultar APIs, ler bancos de dados, executar c√°lculos, etc.
                        </p>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">üîç</div>
                                <h4 class="font-bold text-white text-sm mb-2">Search Tools</h4>
                                <p class="text-xs text-slate-400">Google, Wikipedia, ChromaDB</p>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">üóÑÔ∏è</div>
                                <h4 class="font-bold text-white text-sm mb-2">Data Tools</h4>
                                <p class="text-xs text-slate-400">SQL queries, REST APIs, GraphQL</p>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">‚öôÔ∏è</div>
                                <h4 class="font-bold text-white text-sm mb-2">Action Tools</h4>
                                <p class="text-xs text-slate-400">Email, Slack, criar ticket</p>
                            </div>
                        </div>
                    </div>

                    <!-- Tool Structure -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-code mr-2 gold-accent"></i>Anatomia de uma Tool
                        </h3>
                        <p class="text-sm text-slate-400 mb-4">Uma tool em LangChain tem 3 componentes essenciais:</p>
                        <div class="space-y-4">
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-xs font-bold text-blue-400 uppercase mb-2">1. Name</div>
                                <div class="text-xs text-slate-300 font-mono">
                                    "get_customer_balance"
                                </div>
                                <div class="text-[10px] text-slate-500 mt-1">Identificador √∫nico que o LLM usa para escolher</div>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-xs font-bold text-purple-400 uppercase mb-2">2. Description</div>
                                <div class="text-xs text-slate-300 font-mono">
                                    "Useful for getting the current account balance of a customer. Input should be the customer CPF."
                                </div>
                                <div class="text-[10px] text-slate-500 mt-1">Instru√ß√£o clara para o LLM saber QUANDO usar</div>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-xs font-bold text-green-400 uppercase mb-2">3. Function</div>
                                <div class="text-xs text-slate-300 font-mono">
                                    def get_customer_balance(cpf: str) -> float:<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;# Chama API do Core Banking<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;return balance
                                </div>
                                <div class="text-[10px] text-slate-500 mt-1">Implementa√ß√£o Python que executa a a√ß√£o</div>
                            </div>
                        </div>
                    </div>

                    <!-- Example Tools for Banking -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-university mr-2 gold-accent"></i>Tools para o Ita√∫
                        </h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-blue-900/20 border border-blue-800/50 p-4 rounded-lg">
                                <h4 class="text-sm font-bold text-blue-400 mb-3">get_account_balance</h4>
                                <div class="text-xs text-slate-300 space-y-1">
                                    <div><strong>Input:</strong> CPF</div>
                                    <div><strong>Output:</strong> Saldo atual (R$)</div>
                                    <div><strong>API:</strong> Core Banking REST</div>
                                </div>
                            </div>
                            <div class="bg-purple-900/20 border border-purple-800/50 p-4 rounded-lg">
                                <h4 class="text-sm font-bold text-purple-400 mb-3">get_credit_score</h4>
                                <div class="text-xs text-slate-300 space-y-1">
                                    <div><strong>Input:</strong> CPF</div>
                                    <div><strong>Output:</strong> Score (300-850)</div>
                                    <div><strong>API:</strong> Bureau de Cr√©dito</div>
                                </div>
                            </div>
                            <div class="bg-green-900/20 border border-green-800/50 p-4 rounded-lg">
                                <h4 class="text-sm font-bold text-green-400 mb-3">search_contracts</h4>
                                <div class="text-xs text-slate-300 space-y-1">
                                    <div><strong>Input:</strong> Customer ID</div>
                                    <div><strong>Output:</strong> Lista de contratos</div>
                                    <div><strong>Source:</strong> ChromaDB RAG</div>
                                </div>
                            </div>
                            <div class="bg-orange-900/20 border border-orange-800/50 p-4 rounded-lg">
                                <h4 class="text-sm font-bold text-orange-400 mb-3">calculate_loan_eligibility</h4>
                                <div class="text-xs text-slate-300 space-y-1">
                                    <div><strong>Input:</strong> Income, Score</div>
                                    <div><strong>Output:</strong> Limite aprovado</div>
                                    <div><strong>Logic:</strong> Regras de neg√≥cio</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Function Calling vs Tool Calling -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-random mr-2 gold-accent"></i>Function Calling vs Tool Calling
                        </h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="border-b-2 border-slate-700">
                                        <th class="text-left p-3 text-slate-400 font-semibold w-1/4">Aspecto</th>
                                        <th class="text-left p-3 text-blue-400 font-semibold">Function Calling (OpenAI)</th>
                                        <th class="text-left p-3 text-purple-400 font-semibold">Tool Calling (LangChain)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b border-slate-800">
                                        <td class="p-3 font-semibold text-white">Origem</td>
                                        <td class="p-3 text-slate-300">Nativo do GPT-4</td>
                                        <td class="p-3 text-slate-300">Framework LangChain</td>
                                    </tr>
                                    <tr class="border-b border-slate-800 bg-slate-900/30">
                                        <td class="p-3 font-semibold text-white">Formato</td>
                                        <td class="p-3 text-slate-300">JSON Schema</td>
                                        <td class="p-3 text-slate-300">Python decorators</td>
                                    </tr>
                                    <tr class="border-b border-slate-800">
                                        <td class="p-3 font-semibold text-white">Execu√ß√£o</td>
                                        <td class="p-3 text-slate-300">Manual (voc√™ executa)</td>
                                        <td class="p-3 text-slate-300">Autom√°tica (agent executor)</td>
                                    </tr>
                                    <tr>
                                        <td class="p-3 font-semibold text-white">Melhor para</td>
                                        <td class="p-3 text-slate-300">Controle fino</td>
                                        <td class="p-3 text-slate-300">Prototipagem r√°pida</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Best Practices -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-lightbulb mr-2 gold-accent"></i>Best Practices
                        </h3>
                        <ul class="space-y-3 text-sm text-slate-300">
                            <li class="flex items-start gap-3">
                                <span class="gold-accent text-lg">1.</span>
                                <div>
                                    <strong class="text-white">Descriptions claras:</strong> Especifique exatamente quando usar a tool
                                    <div class="text-xs text-slate-400 mt-1 font-mono bg-slate-900/50 p-2 rounded">
                                        ‚ùå "Gets balance"<br>
                                        ‚úÖ "Use this when user asks about current account balance or available funds. Input is CPF."
                                    </div>
                                </div>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="gold-accent text-lg">2.</span>
                                <div>
                                    <strong class="text-white">Valida√ß√£o de inputs:</strong> Tools devem validar CPF, contas, etc.
                                </div>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="gold-accent text-lg">3.</span>
                                <div>
                                    <strong class="text-white">Error handling:</strong> Retorne mensagens leg√≠veis quando API falhar
                                </div>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="gold-accent text-lg">4.</span>
                                <div>
                                    <strong class="text-white">Timeouts:</strong> APIs externas devem ter timeout de 5-10s
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function renderPlanning(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-green"><i class="fas fa-robot mr-1"></i>Agentes LangChain</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Planning & Multi-step Reasoning</h1>
                        <p class="text-slate-400 text-lg">Agentes que criam planos antes de executar, reduzindo erros e melhorando efici√™ncia.</p>
                    </div>

                    <!-- Problem -->
                    <div class="card mb-8 border-orange-900/30">
                        <h3 class="text-xl font-bold text-orange-400 mb-4">
                            <i class="fas fa-exclamation-triangle mr-2"></i>Problema do ReAct Puro
                        </h3>
                        <p class="text-slate-300 mb-4">
                            ReAct √© reativo: decide o pr√≥ximo passo baseado apenas na observa√ß√£o anterior. 
                            Para tarefas complexas, isso leva a:
                        </p>
                        <ul class="space-y-2 text-sm text-slate-300">
                            <li class="flex items-start gap-2">
                                <span class="text-red-400">‚Ä¢</span>
                                <span><strong>Inefici√™ncia:</strong> Chama tools desnecess√°rias</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-400">‚Ä¢</span>
                                <span><strong>Backtracking:</strong> Percebe erro tarde, precisa refazer steps</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-400">‚Ä¢</span>
                                <span><strong>Loops:</strong> Fica preso em ciclos sem progresso</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Solution -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-list-ol mr-2 gold-accent"></i>Plan-and-Execute Pattern
                        </h3>
                        <p class="text-slate-300 mb-4">
                            Separa em 2 fases: <strong>Planning</strong> (criar plano completo) ‚Üí <strong>Execution</strong> (executar steps sequencialmente).
                        </p>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-blue-900/20 border border-blue-800/50 p-4 rounded-lg">
                                <h4 class="text-blue-400 font-bold mb-3">
                                    <i class="fas fa-clipboard-list mr-2"></i>Phase 1: Planning
                                </h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div class="flex items-start gap-2">
                                        <span class="gold-accent">1.</span>
                                        <span>LLM recebe task complexa</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="gold-accent">2.</span>
                                        <span>Gera plano com subtasks numeradas</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="gold-accent">3.</span>
                                        <span>Cada subtask tem depend√™ncias claras</span>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-green-900/20 border border-green-800/50 p-4 rounded-lg">
                                <h4 class="text-green-400 font-bold mb-3">
                                    <i class="fas fa-play-circle mr-2"></i>Phase 2: Execution
                                </h4>
                                <div class="space-y-2 text-sm text-slate-300">
                                    <div class="flex items-start gap-2">
                                        <span class="gold-accent">1.</span>
                                        <span>Executor segue plano sequencialmente</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="gold-accent">2.</span>
                                        <span>Pode re-planejar se step falhar</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="gold-accent">3.</span>
                                        <span>Retorna resultado final</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Example -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-code mr-2 gold-accent"></i>Exemplo: An√°lise de Portf√≥lio
                        </h3>
                        <div class="bg-slate-900 p-4 rounded-lg border border-slate-700">
                            <div class="text-xs font-bold text-slate-400 uppercase mb-3">User Query:</div>
                            <div class="text-sm text-white mb-4">"Analise o portf√≥lio do cliente 12345 e recomende realoca√ß√£o se necess√°rio"</div>
                            
                            <div class="border-t border-slate-800 pt-4">
                                <div class="text-xs font-bold text-blue-400 uppercase mb-3">
                                    <i class="fas fa-clipboard-list mr-2"></i>Generated Plan:
                                </div>
                                <div class="space-y-2 font-mono text-xs">
                                    <div class="bg-slate-800/50 p-2 rounded">
                                        <span class="text-blue-400">Step 1:</span> <span class="text-slate-300">Get customer risk profile (conservative/moderate/aggressive)</span>
                                    </div>
                                    <div class="bg-slate-800/50 p-2 rounded">
                                        <span class="text-blue-400">Step 2:</span> <span class="text-slate-300">Get current portfolio allocation (stocks/bonds/cash %)</span>
                                    </div>
                                    <div class="bg-slate-800/50 p-2 rounded">
                                        <span class="text-blue-400">Step 3:</span> <span class="text-slate-300">Compare allocation vs ideal for risk profile</span>
                                    </div>
                                    <div class="bg-slate-800/50 p-2 rounded">
                                        <span class="text-blue-400">Step 4:</span> <span class="text-slate-300">If deviation > 10%, generate rebalance recommendation</span>
                                    </div>
                                </div>
                            </div>

                            <div class="border-t border-slate-800 mt-4 pt-4">
                                <div class="text-xs font-bold text-green-400 uppercase mb-3">
                                    <i class="fas fa-check-circle mr-2"></i>Execution Trace:
                                </div>
                                <div class="space-y-2 font-mono text-[10px]">
                                    <div class="flex gap-2">
                                        <span class="text-green-400">‚úì Step 1:</span>
                                        <span class="text-slate-400">get_risk_profile(12345) ‚Üí "moderate"</span>
                                    </div>
                                    <div class="flex gap-2">
                                        <span class="text-green-400">‚úì Step 2:</span>
                                        <span class="text-slate-400">get_portfolio(12345) ‚Üí 70% stocks, 20% bonds, 10% cash</span>
                                    </div>
                                    <div class="flex gap-2">
                                        <span class="text-green-400">‚úì Step 3:</span>
                                        <span class="text-slate-400">Ideal for moderate: 60/30/10. Deviation: 10% stocks, -10% bonds</span>
                                    </div>
                                    <div class="flex gap-2">
                                        <span class="text-gold-accent">‚Üí Step 4:</span>
                                        <span class="text-white">Recommendation: Sell 10% stocks, buy bonds</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Comparison -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-balance-scale mr-2 gold-accent"></i>ReAct vs Plan-and-Execute
                        </h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="border-b-2 border-slate-700">
                                        <th class="text-left p-3 text-slate-400 font-semibold">Crit√©rio</th>
                                        <th class="text-left p-3 text-blue-400 font-semibold">ReAct</th>
                                        <th class="text-left p-3 text-green-400 font-semibold">Plan-and-Execute</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b border-slate-800">
                                        <td class="p-3 font-semibold text-white">Complexidade</td>
                                        <td class="p-3 text-slate-300">Tarefas simples (1-3 steps)</td>
                                        <td class="p-3 text-slate-300">Tarefas complexas (5+ steps)</td>
                                    </tr>
                                    <tr class="border-b border-slate-800 bg-slate-900/30">
                                        <td class="p-3 font-semibold text-white">Efici√™ncia</td>
                                        <td class="p-3 text-orange-400">Pode ser ineficiente</td>
                                        <td class="p-3 text-green-400">Otimizada (plano antecipado)</td>
                                    </tr>
                                    <tr class="border-b border-slate-800">
                                        <td class="p-3 font-semibold text-white">Adaptabilidade</td>
                                        <td class="p-3 text-green-400">Alta (reage a mudan√ßas)</td>
                                        <td class="p-3 text-orange-400">M√©dia (precisa re-planejar)</td>
                                    </tr>
                                    <tr class="border-b border-slate-800 bg-slate-900/30">
                                        <td class="p-3 font-semibold text-white">Custo</td>
                                        <td class="p-3 text-orange-400">Vari√°vel (loops)</td>
                                        <td class="p-3 text-green-400">Previs√≠vel</td>
                                    </tr>
                                    <tr>
                                        <td class="p-3 font-semibold text-white">Quando usar</td>
                                        <td class="p-3 text-slate-300">Explora√ß√£o, incerteza</td>
                                        <td class="p-3 text-slate-300">Workflows bem definidos</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMemory(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-green"><i class="fas fa-robot mr-1"></i>Agentes LangChain</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Memory Systems</h1>
                        <p class="text-slate-400 text-lg">Dando contexto e hist√≥rico aos agentes para conversas naturais.</p>
                    </div>

                    <!-- Intro -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-brain mr-2 gold-accent"></i>Por que Memory?
                        </h3>
                        <p class="text-slate-300 mb-4">
                            LLMs s√£o <strong>stateless</strong>: cada chamada √© independente. Sem mem√≥ria, o agente 
                            "esquece" a conversa anterior.
                        </p>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-red-900/20 border border-red-800/50 p-4 rounded-lg">
                                <h4 class="text-red-400 font-bold text-sm mb-2">‚ùå Sem Memory</h4>
                                <div class="text-xs text-slate-300 font-mono space-y-1">
                                    <div>User: "Meu saldo?"</div>
                                    <div>Agent: "R$ 5,420"</div>
                                    <div class="pt-2">User: "E o extrato?"</div>
                                    <div class="text-red-400">Agent: "De qual conta?"</div>
                                    <div class="text-[10px] text-slate-500">‚ùå Esqueceu contexto</div>
                                </div>
                            </div>
                            <div class="bg-green-900/20 border border-green-800/50 p-4 rounded-lg">
                                <h4 class="text-green-400 font-bold text-sm mb-2">‚úÖ Com Memory</h4>
                                <div class="text-xs text-slate-300 font-mono space-y-1">
                                    <div>User: "Meu saldo?"</div>
                                    <div>Agent: "R$ 5,420"</div>
                                    <div class="pt-2">User: "E o extrato?"</div>
                                    <div class="text-green-400">Agent: "Aqui est√° o extrato da sua conta..."</div>
                                    <div class="text-[10px] text-slate-500">‚úÖ Lembra que j√° identificou o cliente</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Memory Types -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-layer-group mr-2 gold-accent"></i>Tipos de Memory
                        </h3>
                        <div class="space-y-4">
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="flex items-start gap-4">
                                    <div class="bg-blue-900/30 border border-blue-800/50 rounded-lg p-3 w-48 text-center">
                                        <div class="text-xl mb-2">üí¨</div>
                                        <div class="text-sm font-bold text-blue-400">Buffer Memory</div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm text-slate-300 mb-2">
                                            Armazena as √∫ltimas <strong>N mensagens</strong> (ex: √∫ltimas 10).
                                        </p>
                                        <div class="bg-slate-900/50 p-2 rounded text-xs font-mono text-slate-400">
                                            messages = [msg1, msg2, ..., msg10]
                                        </div>
                                        <div class="mt-2 text-xs text-slate-500">
                                            ‚úÖ Simples | ‚ùå Limita contexto longo
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="flex items-start gap-4">
                                    <div class="bg-purple-900/30 border border-purple-800/50 rounded-lg p-3 w-48 text-center">
                                        <div class="text-xl mb-2">üìù</div>
                                        <div class="text-sm font-bold text-purple-400">Summary Memory</div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm text-slate-300 mb-2">
                                            Sumariza conversas antigas em texto compacto.
                                        </p>
                                        <div class="bg-slate-900/50 p-2 rounded text-xs font-mono text-slate-400">
                                            summary = "Customer asked about balance, then requested loan info..."
                                        </div>
                                        <div class="mt-2 text-xs text-slate-500">
                                            ‚úÖ Contexto ilimitado | ‚ùå Pode perder detalhes
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="flex items-start gap-4">
                                    <div class="bg-green-900/30 border border-green-800/50 rounded-lg p-3 w-48 text-center">
                                        <div class="text-xl mb-2">üè∑Ô∏è</div>
                                        <div class="text-sm font-bold text-green-400">Entity Memory</div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm text-slate-300 mb-2">
                                            Extrai e rastreia entidades espec√≠ficas (pessoas, contas, valores).
                                        </p>
                                        <div class="bg-slate-900/50 p-2 rounded text-xs font-mono text-slate-400">
                                            entities = {<br>
                                            &nbsp;&nbsp;"customer_name": "Jo√£o Silva",<br>
                                            &nbsp;&nbsp;"account": "12345-6",<br>
                                            &nbsp;&nbsp;"last_balance": 5420<br>
                                            }
                                        </div>
                                        <div class="mt-2 text-xs text-slate-500">
                                            ‚úÖ Dados estruturados | ‚ùå Setup complexo
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="flex items-start gap-4">
                                    <div class="bg-orange-900/30 border border-orange-800/50 rounded-lg p-3 w-48 text-center">
                                        <div class="text-xl mb-2">üîç</div>
                                        <div class="text-sm font-bold text-orange-400">Vector Memory</div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm text-slate-300 mb-2">
                                            Armazena conversas em ChromaDB, busca mensagens relevantes semanticamente.
                                        </p>
                                        <div class="bg-slate-900/50 p-2 rounded text-xs font-mono text-slate-400">
                                            query: "loan discussion"<br>
                                            retrieval: [msg_42, msg_89] (conversas sobre empr√©stimo)
                                        </div>
                                        <div class="mt-2 text-xs text-slate-500">
                                            ‚úÖ Contexto mais relevante | ‚ùå Adiciona lat√™ncia
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Hybrid Approach -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-puzzle-piece mr-2 gold-accent"></i>Abordagem H√≠brida (Recomendada)
                        </h3>
                        <p class="text-slate-300 mb-4">
                            Combine m√∫ltiplos tipos de mem√≥ria para melhor desempenho:
                        </p>
                        <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                            <div class="grid md:grid-cols-3 gap-4 text-xs">
                                <div class="text-center p-3 bg-slate-900/50 rounded">
                                    <div class="text-blue-400 font-bold mb-2">Short-term</div>
                                    <div class="text-slate-300">Buffer Memory<br>(√∫ltimas 5 msgs)</div>
                                </div>
                                <div class="text-center p-3 bg-slate-900/50 rounded">
                                    <div class="text-purple-400 font-bold mb-2">Long-term</div>
                                    <div class="text-slate-300">Summary Memory<br>(resumo geral)</div>
                                </div>
                                <div class="text-center p-3 bg-slate-900/50 rounded">
                                    <div class="text-green-400 font-bold mb-2">Structured</div>
                                    <div class="text-slate-300">Entity Memory<br>(dados do cliente)</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Implementation -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-cogs mr-2 gold-accent"></i>Implementa√ß√£o no Ita√∫
                        </h3>
                        <div class="space-y-4">
                            <div class="bg-blue-900/20 border border-blue-800/50 p-4 rounded-lg">
                                <h4 class="text-sm font-bold text-blue-400 mb-2">Chatbot de Atendimento</h4>
                                <ul class="text-xs text-slate-300 space-y-1">
                                    <li>‚Ä¢ Buffer: √∫ltimas 10 mensagens da conversa</li>
                                    <li>‚Ä¢ Entity: CPF, conta, saldo mencionados</li>
                                    <li>‚Ä¢ Persiste no Redis com session_id</li>
                                </ul>
                            </div>
                            <div class="bg-purple-900/20 border border-purple-800/50 p-4 rounded-lg">
                                <h4 class="text-sm font-bold text-purple-400 mb-2">Assistente de Investimentos</h4>
                                <ul class="text-xs text-slate-300 space-y-1">
                                    <li>‚Ä¢ Summary: conversas antigas sobre metas financeiras</li>
                                    <li>‚Ä¢ Vector: busca discuss√µes anteriores sobre fundos espec√≠ficos</li>
                                    <li>‚Ä¢ Persiste no PostgreSQL + ChromaDB</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderAgentArchitectures(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-green"><i class="fas fa-robot mr-1"></i>Agentes LangChain</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Agent Architectures</h1>
                        <p class="text-slate-400 text-lg">Padr√µes de orquestra√ß√£o: Router, Supervisor e Multi-Agent Systems.</p>
                    </div>

                    <!-- Router Agent -->
                    <div class="card mb-8 border-blue-900/30">
                        <h3 class="text-xl font-bold text-blue-400 mb-4">
                            <i class="fas fa-random mr-2"></i>Router Agent
                        </h3>
                        <p class="text-sm text-slate-300 mb-4">
                            Classifica a inten√ß√£o do usu√°rio e roteia para o agente especializado correto.
                        </p>
                        <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700 mb-4">
                            <div class="flex items-center gap-4 justify-center">
                                <div class="bg-blue-900/30 border border-blue-800/50 rounded-lg p-3 w-32 text-center">
                                    <div class="text-xs font-bold text-blue-400">User Query</div>
                                </div>
                                <div class="text-xl gold-accent">‚Üí</div>
                                <div class="bg-purple-900/30 border-2 border-purple-800/50 rounded-lg p-3 w-40 text-center">
                                    <div class="text-xs font-bold text-purple-400">ROUTER</div>
                                    <div class="text-[10px] text-slate-400 mt-1">Classifica inten√ß√£o</div>
                                </div>
                                <div class="text-xl gold-accent">‚Üí</div>
                                <div class="flex flex-col gap-2">
                                    <div class="bg-green-900/30 border border-green-800/50 rounded-lg p-2 w-32 text-center text-xs text-green-400">
                                        Saldo Agent
                                    </div>
                                    <div class="bg-orange-900/30 border border-orange-800/50 rounded-lg p-2 w-32 text-center text-xs text-orange-400">
                                        Empr√©stimo Agent
                                    </div>
                                    <div class="bg-red-900/30 border border-red-800/50 rounded-lg p-2 w-32 text-center text-xs text-red-400">
                                        Investimento Agent
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-blue-900/20 p-3 rounded-lg">
                            <p class="text-xs text-blue-300">
                                <strong>Quando usar:</strong> M√∫ltiplos dom√≠nios distintos (banking, investments, insurance) que n√£o se comunicam entre si.
                            </p>
                        </div>
                    </div>

                    <!-- Supervisor Agent -->
                    <div class="card mb-8 border-purple-900/30">
                        <h3 class="text-xl font-bold text-purple-400 mb-4">
                            <i class="fas fa-user-tie mr-2"></i>Supervisor Agent
                        </h3>
                        <p class="text-sm text-slate-300 mb-4">
                            Orquestra m√∫ltiplos agentes subordinados, delegando subtarefas e agregando resultados.
                        </p>
                        <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700 mb-4">
                            <div class="space-y-3">
                                <div class="flex items-center gap-3">
                                    <div class="bg-purple-900/30 border-2 border-purple-800/50 rounded-lg p-3 flex-1 text-center">
                                        <div class="text-sm font-bold text-purple-400">SUPERVISOR</div>
                                        <div class="text-[10px] text-slate-400 mt-1">"Analisar cr√©dito do cliente 12345"</div>
                                    </div>
                                </div>
                                <div class="flex justify-center">
                                    <div class="text-sm gold-accent">‚Üì Delega subtarefas ‚Üì</div>
                                </div>
                                <div class="grid md:grid-cols-3 gap-3">
                                    <div class="bg-blue-900/30 border border-blue-800/50 rounded-lg p-3 text-center">
                                        <div class="text-xs font-bold text-blue-400 mb-1">Credit Agent</div>
                                        <div class="text-[9px] text-slate-300">Busca score</div>
                                    </div>
                                    <div class="bg-green-900/30 border border-green-800/50 rounded-lg p-3 text-center">
                                        <div class="text-xs font-bold text-green-400 mb-1">Income Agent</div>
                                        <div class="text-[9px] text-slate-300">Verifica renda</div>
                                    </div>
                                    <div class="bg-orange-900/30 border border-orange-800/50 rounded-lg p-3 text-center">
                                        <div class="text-xs font-bold text-orange-400 mb-1">Risk Agent</div>
                                        <div class="text-[9px] text-slate-300">Calcula risco</div>
                                    </div>
                                </div>
                                <div class="flex justify-center">
                                    <div class="text-sm gold-accent">‚Üì Agrega resultados ‚Üì</div>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="bg-purple-900/30 border-2 border-purple-800/50 rounded-lg p-3 flex-1 text-center">
                                        <div class="text-sm font-bold text-purple-400">SUPERVISOR</div>
                                        <div class="text-[10px] text-white mt-1">‚úÖ APROVADO - Limite: R$ 25k</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-purple-900/20 p-3 rounded-lg">
                            <p class="text-xs text-purple-300">
                                <strong>Quando usar:</strong> Tarefas complexas que requerem especializa√ß√£o (ex: an√°lise de cr√©dito com m√∫ltiplas fontes).
                            </p>
                        </div>
                    </div>

                    <!-- Multi-Agent Collaboration -->
                    <div class="card mb-8 border-green-900/30">
                        <h3 class="text-xl font-bold text-green-400 mb-4">
                            <i class="fas fa-users mr-2"></i>Multi-Agent Collaboration
                        </h3>
                        <p class="text-sm text-slate-300 mb-4">
                            Agentes se comunicam entre si (peer-to-peer) sem hierarquia central.
                        </p>
                        <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700 mb-4">
                            <div class="grid grid-cols-3 gap-4">
                                <div class="bg-blue-900/30 border border-blue-800/50 rounded-lg p-3 text-center">
                                    <div class="text-xs font-bold text-blue-400 mb-2">Research Agent</div>
                                    <div class="text-[9px] text-slate-300">Busca dados<br>no ChromaDB</div>
                                </div>
                                <div class="bg-purple-900/30 border border-purple-800/50 rounded-lg p-3 text-center">
                                    <div class="text-xs font-bold text-purple-400 mb-2">Writer Agent</div>
                                    <div class="text-[9px] text-slate-300">Redige relat√≥rio<br>com dados</div>
                                </div>
                                <div class="bg-orange-900/30 border border-orange-800/50 rounded-lg p-3 text-center">
                                    <div class="text-xs font-bold text-orange-400 mb-2">Reviewer Agent</div>
                                    <div class="text-[9px] text-slate-300">Revisa qualidade<br>e compliance</div>
                                </div>
                            </div>
                            <div class="mt-4 flex items-center justify-center gap-3 text-xs">
                                <span class="text-slate-400">Research</span>
                                <span class="gold-accent">‚ü∑</span>
                                <span class="text-slate-400">Writer</span>
                                <span class="gold-accent">‚ü∑</span>
                                <span class="text-slate-400">Reviewer</span>
                            </div>
                        </div>
                        <div class="bg-green-900/20 p-3 rounded-lg">
                            <p class="text-xs text-green-300">
                                <strong>Quando usar:</strong> Workflows criativos onde agentes precisam iterar e refinar (ex: gera√ß√£o de relat√≥rios).
                            </p>
                        </div>
                    </div>

                    <!-- Comparison -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-table mr-2 gold-accent"></i>Comparativo
                        </h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="border-b-2 border-slate-700">
                                        <th class="text-left p-3 text-slate-400 font-semibold">Arquitetura</th>
                                        <th class="text-left p-3 text-slate-400 font-semibold">Comunica√ß√£o</th>
                                        <th class="text-left p-3 text-slate-400 font-semibold">Complexidade</th>
                                        <th class="text-left p-3 text-slate-400 font-semibold">Melhor para</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b border-slate-800">
                                        <td class="p-3 font-bold text-blue-400">Router</td>
                                        <td class="p-3 text-slate-300">1:N (uma dire√ß√£o)</td>
                                        <td class="p-3 text-green-400">Baixa</td>
                                        <td class="p-3 text-slate-300">Classifica√ß√£o simples</td>
                                    </tr>
                                    <tr class="border-b border-slate-800 bg-slate-900/30">
                                        <td class="p-3 font-bold text-purple-400">Supervisor</td>
                                        <td class="p-3 text-slate-300">Hub-and-Spoke</td>
                                        <td class="p-3 text-orange-400">M√©dia</td>
                                        <td class="p-3 text-slate-300">Orquestra√ß√£o hier√°rquica</td>
                                    </tr>
                                    <tr class="border-b border-slate-800">
                                        <td class="p-3 font-bold text-green-400">Multi-Agent</td>
                                        <td class="p-3 text-slate-300">Peer-to-Peer</td>
                                        <td class="p-3 text-red-400">Alta</td>
                                        <td class="p-3 text-slate-300">Colabora√ß√£o complexa</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
        }

        // === LAB PR√ÅTICO ===

        function renderLabOverview(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-blue"><i class="fas fa-flask mr-1"></i>Lab Pr√°tico</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Arquitetura do Projeto</h1>
                        <p class="text-slate-400 text-lg">Auditor de Contratos com RAG + Agente ReAct usando LangChain e ChromaDB.</p>
                    </div>

                    <!-- Project Overview -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-bullseye mr-2 gold-accent"></i>Objetivo do Projeto
                        </h3>
                        <p class="text-slate-300 mb-4">
                            Construir um agente que analisa contratos de m√∫tuos banc√°rios, extraindo metadados estruturados 
                            (garantias, taxas, riscos) usando RAG para contextualiza√ß√£o.
                        </p>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">üìÑ</div>
                                <h4 class="font-bold text-white text-sm mb-2">Input</h4>
                                <p class="text-xs text-slate-400">PDFs de contratos de cr√©dito</p>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">ü§ñ</div>
                                <h4 class="font-bold text-white text-sm mb-2">Processamento</h4>
                                <p class="text-xs text-slate-400">RAG + Agent + Structured Output</p>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                                <div class="text-2xl mb-2">üìä</div>
                                <h4 class="font-bold text-white text-sm mb-2">Output</h4>
                                <p class="text-xs text-slate-400">JSON com metadados estruturados</p>
                            </div>
                        </div>
                    </div>

                    <!-- Architecture Diagram -->
                    <div class="card mb-8">
                        <h3 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-sitemap mr-2 gold-accent"></i>Arquitetura Completa
                        </h3>
                        <div class="bg-slate-900 p-6 rounded-lg border border-slate-700">
                            <div class="space-y-6">
                                <!-- Layer 1: Ingestion -->
                                <div>
                                    <div class="text-xs font-bold text-blue-400 uppercase mb-3">Layer 1: Document Ingestion</div>
                                    <div class="grid md:grid-cols-4 gap-3">
                                        <div class="bg-blue-900/30 border border-blue-800/50 rounded p-3 text-center">
                                            <div class="text-xs font-bold text-blue-400">PyPDF</div>
                                            <div class="text-[9px] text-slate-400 mt-1">Extra√ß√£o de texto</div>
                                        </div>
                                        <div class="bg-blue-900/30 border border-blue-800/50 rounded p-3 text-center">
                                            <div class="text-xs font-bold text-blue-400">RecursiveCharacterTextSplitter</div>
                                            <div class="text-[9px] text-slate-400 mt-1">Chunking sem√¢ntico</div>
                                        </div>
                                        <div class="bg-blue-900/30 border border-blue-800/50 rounded p-3 text-center">
                                            <div class="text-xs font-bold text-blue-400">OpenAI Embeddings</div>
                                            <div class="text-[9px] text-slate-400 mt-1">text-embedding-3-small</div>
                                        </div>
                                        <div class="bg-blue-900/30 border border-blue-800/50 rounded p-3 text-center">
                                            <div class="text-xs font-bold text-blue-400">ChromaDB</div>
                                            <div class="text-[9px] text-slate-400 mt-1">Vector Store persistente</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Layer 2: Retrieval -->
                                <div>
                                    <div class="text-xs font-bold text-purple-400 uppercase mb-3">Layer 2: Retrieval</div>
                                    <div class="grid md:grid-cols-3 gap-3">
                                        <div class="bg-purple-900/30 border border-purple-800/50 rounded p-3 text-center">
                                            <div class="text-xs font-bold text-purple-400">Query Embedding</div>
                                            <div class="text-[9px] text-slate-400 mt-1">Pergunta ‚Üí vetor</div>
                                        </div>
                                        <div class="bg-purple-900/30 border border-purple-800/50 rounded p-3 text-center">
                                            <div class="text-xs font-bold text-purple-400">Similarity Search</div>
                                            <div class="text-[9px] text-slate-400 mt-1">Top-3 chunks</div>
                                        </div>
                                        <div class="bg-purple-900/30 border border-purple-800/50 rounded p-3 text-center">
                                            <div class="text-xs font-bold text-purple-400">Context Assembly</div>
                                            <div class="text-[9px] text-slate-400 mt-1">Monta prompt</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Layer 3: Agent -->
                                <div>
                                    <div class="text-xs font-bold text-green-400 uppercase mb-3">Layer 3: ReAct Agent</div>
                                    <div class="grid md:grid-cols-3 gap-3">
                                        <div class="bg-green-900/30 border border-green-800/50 rounded p-3 text-center">
                                            <div class="text-xs font-bold text-green-400">Tools</div>
                                            <div class="text-[9px] text-slate-400 mt-1">search_contracts, extract_clause</div>
                                        </div>
                                        <div class="bg-green-900/30 border border-green-800/50 rounded p-3 text-center">
                                            <div class="text-xs font-bold text-green-400">GPT-4 Turbo</div>
                                            <div class="text-[9px] text-slate-400 mt-1">ReAct loop</div>
                                        </div>
                                        <div class="bg-green-900/30 border border-green-800/50 rounded p-3 text-center">
                                            <div class="text-xs font-bold text-green-400">Structured Output</div>
                                            <div class="text-[9px] text-slate-400 mt-1">Pydantic validation</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Layer 4: Output -->
                                <div>
                                    <div class="text-xs font-bold text-orange-400 uppercase mb-3">Layer 4: Output</div>
                                    <div class="bg-orange-900/30 border border-orange-800/50 rounded p-4 text-center">
                                        <div class="text-xs font-bold text-orange-400">JSON Response</div>
                                        <div class="text-[9px] text-slate-400 mt-1">garantia_tipo, valor, prazo, risco_legal, compliance_status</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tech Stack -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-white mb-4">
                            <i class="fas fa-layer-group mr-2 gold-accent"></i>Stack Tecnol√≥gico
                        </h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="text-sm font-bold text-slate-300 mb-3">Core Libraries</h4>
                                <div class="space-y-2">
                                    <div class="flex justify-between items-center bg-slate-800/50 p-2 rounded text-xs">
                                        <span class="text-slate-300 font-mono">langchain</span>
                                        <span class="badge badge-blue">0.1.0</span>
                                    </div>
                                    <div class="flex justify-between items-center bg-slate-800/50 p-2 rounded text-xs">
                                        <span class="text-slate-300 font-mono">chromadb</span>
                                        <span class="badge badge-blue">0.4.22</span>
                                    </div>
                                    <div class="flex justify-between items-center bg-slate-800/50 p-2 rounded text-xs">
                                        <span class="text-slate-300 font-mono">openai</span>
                                        <span class="badge badge-blue">1.10.0</span>
                                    </div>
                                    <div class="flex justify-between items-center bg-slate-800/50 p-2 rounded text-xs">
                                        <span class="text-slate-300 font-mono">pydantic</span>
                                        <span class="badge badge-blue">2.5.0</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="text-sm font-bold text-slate-300 mb-3">Utilities</h4>
                                <div class="space-y-2">
                                    <div class="flex justify-between items-center bg-slate-800/50 p-2 rounded text-xs">
                                        <span class="text-slate-300 font-mono">pypdf2</span>
                                        <span class="badge badge-green">3.0.1</span>
                                    </div>
                                    <div class="flex justify-between items-center bg-slate-800/50 p-2 rounded text-xs">
                                        <span class="text-slate-300 font-mono">python-dotenv</span>
                                        <span class="badge badge-green">1.0.0</span>
                                    </div>
                                    <div class="flex justify-between items-center bg-slate-800/50 p-2 rounded text-xs">
                                        <span class="text-slate-300 font-mono">tiktoken</span>
                                        <span class="badge badge-green">0.5.2</span>
                                    </div>
                                    <div class="flex justify-between items-center bg-slate-800/50 p-2 rounded text-xs">
                                        <span class="text-slate-300 font-mono">rich</span>
                                        <span class="badge badge-green">13.7.0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderLabCode(container) {
            container.innerHTML = `
                <div class="max-w-6xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-blue"><i class="fas fa-code mr-1"></i>Lab Pr√°tico</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Code Walkthrough</h1>
                        <p class="text-slate-400 text-lg">Implementa√ß√£o passo a passo do Auditor de Contratos com LangChain.</p>
                    </div>

                    <!-- Setup & Imports -->
                    <div class="card mb-8">
                        <h3 class="text-lg font-bold text-white mb-4">
                            <i class="fas fa-file-code mr-2 gold-accent"></i>1. Setup & Imports
                        </h3>
                        <div class="code-block-container">
                            <button onclick="copyCode(this)" class="copy-btn"><i class="fas fa-copy mr-1"></i>Copiar</button>
                            <pre class="language-python"><code class="language-python"># auditor_contratos.py
import os
from dotenv import load_dotenv
from langchain_openai import ChatOpenAI, OpenAIEmbeddings
from langchain_community.vectorstores import Chroma
from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain.document_loaders import PyPDFLoader
from langchain.agents import AgentExecutor, create_react_agent
from langchain.tools import Tool
from pydantic import BaseModel, Field

# Carrega vari√°veis de ambiente
load_dotenv()
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")</code></pre>
                        </div>
                        <div class="mt-3 text-xs text-slate-400">
                            <i class="fas fa-info-circle mr-1"></i>
                            Crie um arquivo <code class="bg-slate-800 px-1 rounded">.env</code> com sua chave:
                            <code class="bg-slate-800 px-2 py-1 rounded ml-2">OPENAI_API_KEY=sk-...</code>
                        </div>
                    </div>

                    <!-- Document Ingestion -->
                    <div class="card mb-8">
                        <h3 class="text-lg font-bold text-white mb-4">
                            <i class="fas fa-file-upload mr-2 gold-accent"></i>2. Document Ingestion & Embedding
                        </h3>
                        <div class="code-block-container">
                            <button onclick="copyCode(this)" class="copy-btn"><i class="fas fa-copy mr-1"></i>Copiar</button>
                            <pre class="language-python"><code class="language-python">def ingest_contract(pdf_path: str, collection_name: str = "contratos"):
    """
    Carrega PDF, divide em chunks e indexa no ChromaDB.
    """
    # 1. Carregar PDF
    loader = PyPDFLoader(pdf_path)
    documents = loader.load()
    
    # 2. Chunking (500 chars, overlap 50)
    text_splitter = RecursiveCharacterTextSplitter(
        chunk_size=500,
        chunk_overlap=50,
        separators=["\\n\\n", "\\n", ". ", " "]
    )
    chunks = text_splitter.split_documents(documents)
    
    # 3. Embedding + Indexing
    embeddings = OpenAIEmbeddings(model="text-embedding-3-small")
    vectorstore = Chroma.from_documents(
        documents=chunks,
        embedding=embeddings,
        collection_name=collection_name,
        persist_directory="./chroma_db"
    )
    
    print(f"‚úÖ Indexados {len(chunks)} chunks no ChromaDB")
    return vectorstore</code></pre>
                        </div>
                    </div>

                    <!-- Tools Definition -->
                    <div class="card mb-8">
                        <h3 class="text-lg font-bold text-white mb-4">
                            <i class="fas fa-tools mr-2 gold-accent"></i>3. Defini√ß√£o de Tools
                        </h3>
                        <div class="code-block-container">
                            <button onclick="copyCode(this)" class="copy-btn"><i class="fas fa-copy mr-1"></i>Copiar</button>
                            <pre class="language-python"><code class="language-python">def create_tools(vectorstore):
    """
    Cria tools para o agente usar.
    """
    
    def search_contract(query: str) -> str:
        """
        Busca chunks relevantes no contrato usando similaridade sem√¢ntica.
        Input: pergunta sobre o contrato (ex: 'garantias', 'juros')
        """
        retriever = vectorstore.as_retriever(search_kwargs={"k": 3})
        docs = retriever.get_relevant_documents(query)
        
        # Formata resultado
        context = "\\n\\n---\\n\\n".join([doc.page_content for doc in docs])
        return f"Chunks encontrados:\\n{context}"
    
    def extract_clause(clause_number: str) -> str:
        """
        Extrai cl√°usula espec√≠fica do contrato.
        Input: n√∫mero da cl√°usula (ex: '4', '5.1')
        """
        query = f"CL√ÅUSULA {clause_number.upper()}"
        docs = vectorstore.similarity_search(query, k=1)
        
        if docs:
            return docs[0].page_content
        return f"Cl√°usula {clause_number} n√£o encontrada."
    
    # Retorna lista de Tools
    return [
        Tool(
            name="search_contract",
            func=search_contract,
            description="Use this to search for information in the contract. Input should be a question or keyword."
        ),
        Tool(
            name="extract_clause",
            func=extract_clause,
            description="Use this to extract a specific clause number. Input should be the clause number like '4' or '5.1'."
        )
    ]</code></pre>
                        </div>
                    </div>

                    <!-- Output Schema -->
                    <div class="card mb-8">
                        <h3 class="text-lg font-bold text-white mb-4">
                            <i class="fas fa-database mr-2 gold-accent"></i>4. Structured Output Schema
                        </h3>
                        <div class="code-block-container">
                            <button onclick="copyCode(this)" class="copy-btn"><i class="fas fa-copy mr-1"></i>Copiar</button>
                            <pre class="language-python"><code class="language-python">class ContractMetadata(BaseModel):
    """
    Schema Pydantic para validar output estruturado.
    """
    garantia_tipo: str = Field(description="Tipo de garantia (ex: 'Aliena√ß√£o Fiduci√°ria')")
    garantia_objeto: str = Field(description="Objeto dado em garantia (ex: 'Im√≥vel Matr√≠cula 12345')")
    taxa_juros: float = Field(description="Taxa de juros mensal em %")
    prazo_meses: int = Field(description="Prazo do contrato em meses")
    valor_principal: float = Field(description="Valor principal do contrato em reais")
    risco_legal: str = Field(description="Classifica√ß√£o de risco: 'Baixo', 'M√©dio' ou 'Alto'")
    compliance_check: bool = Field(description="True se contrato est√° em compliance")</code></pre>
                        </div>
                    </div>

                    <!-- Agent Creation -->
                    <div class="card mb-8">
                        <h3 class="text-lg font-bold text-white mb-4">
                            <i class="fas fa-robot mr-2 gold-accent"></i>5. Cria√ß√£o do Agent ReAct
                        </h3>
                        <div class="code-block-container">
                            <button onclick="copyCode(this)" class="copy-btn"><i class="fas fa-copy mr-1"></i>Copiar</button>
                            <pre class="language-python"><code class="language-python">def create_auditor_agent(vectorstore):
    """
    Cria agente ReAct para auditar contratos.
    """
    # LLM
    llm = ChatOpenAI(
        model="gpt-4-turbo-preview",
        temperature=0,  # Determin√≠stico para an√°lise
        streaming=True
    )
    
    # Tools
    tools = create_tools(vectorstore)
    
    # Prompt Template ReAct
    prompt_template = """
    You are a legal contract auditor for Banco Ita√∫.
    Your task is to analyze contracts and extract structured metadata.
    
    You have access to the following tools:
    {tools}
    
    Use the following format:
    
    Thought: I need to find information about X
    Action: search_contract
    Action Input: "guarantees"
    Observation: [resultado da tool]
    ... (repeat Thought/Action/Observation as needed)
    Thought: I now have enough information
    Final Answer: [JSON with ContractMetadata schema]
    
    Question: {input}
    
    {agent_scratchpad}
    """
    
    # Cria Agent
    agent = create_react_agent(llm, tools, prompt_template)
    agent_executor = AgentExecutor(
        agent=agent,
        tools=tools,
        verbose=True,
        max_iterations=5,
        handle_parsing_errors=True
    )
    
    return agent_executor</code></pre>
                        </div>
                    </div>

                    <!-- Main Execution -->
                    <div class="card">
                        <h3 class="text-lg font-bold text-white mb-4">
                            <i class="fas fa-play-circle mr-2 gold-accent"></i>6. Execu√ß√£o Principal
                        </h3>
                        <div class="code-block-container">
                            <button onclick="copyCode(this)" class="copy-btn"><i class="fas fa-copy mr-1"></i>Copiar</button>
                            <pre class="language-python"><code class="language-python">if __name__ == "__main__":
    # 1. Ingest√£o
    print("üìÑ Processando contrato...")
    vectorstore = ingest_contract("contrato_mutuo.pdf")
    
    # 2. Criar Agent
    print("ü§ñ Criando agente auditor...")
    agent = create_auditor_agent(vectorstore)
    
    # 3. Executar An√°lise
    print("üîç Analisando contrato...\\n")
    query = """
    Analyze this contract and extract:
    - Type and object of guarantee
    - Interest rate and term
    - Principal amount
    - Legal risk assessment
    - Compliance status
    
    Return as JSON following ContractMetadata schema.
    """
    
    result = agent.invoke({"input": query})
    
    # 4. Exibir Resultado
    print("\\n‚úÖ RESULTADO FINAL:")
    print(result["output"])</code></pre>
                        </div>
                        <div class="mt-4 bg-green-900/20 border border-green-800/50 p-3 rounded-lg">
                            <div class="text-xs font-bold text-green-400 mb-2">
                                <i class="fas fa-terminal mr-2"></i>Para executar:
                            </div>
                            <code class="text-xs text-slate-300 font-mono">python auditor_contratos.py</code>
                        </div>
                    </div>
                </div>
            `;
            // Trigger Prism syntax highlighting
            if (typeof Prism !== 'undefined') {
                Prism.highlightAll();
            }
        }

        function renderLabExercises(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto fade-in">
                    <div class="mb-10">
                        <span class="badge badge-blue"><i class="fas fa-clipboard-check mr-1"></i>Lab Pr√°tico</span>
                        <h1 class="text-4xl font-bold text-white mt-4 mb-2">Exerc√≠cios Pr√°ticos</h1>
                        <p class="text-slate-400 text-lg">Desafios hands-on para implementar durante a aula.</p>
                    </div>

                    <div id="exercises-container" class="space-y-6">
                        <!-- Exercise cards will be injected here -->
                    </div>
                </div>
            `;
            
            // Exercises data
            const exercises = [
                {
                    id: 'ex1',
                    level: 'B√°sico',
                    levelColor: 'green',
                    title: 'Setup do Ambiente',
                    description: 'Configure o ambiente Python com as depend√™ncias necess√°rias.',
                    tasks: [
                        'Criar virtualenv: <code>python -m venv venv</code>',
                        'Ativar ambiente: <code>source venv/bin/activate</code> (Linux/Mac) ou <code>venv\\\\Scripts\\\\activate</code> (Windows)',
                        'Instalar depend√™ncias: <code>pip install langchain chromadb openai pypdf2 python-dotenv</code>',
                        'Criar arquivo .env com sua OPENAI_API_KEY',
                        'Testar import: <code>python -c "import langchain; print(langchain.__version__)"</code>'
                    ]
                },
                {
                    id: 'ex2',
                    level: 'B√°sico',
                    levelColor: 'green',
                    title: 'Ingest√£o de Documento',
                    description: 'Implemente a fun√ß√£o de ingest√£o de PDFs no ChromaDB.',
                    tasks: [
                        'Baixar um contrato PDF de exemplo',
                        'Implementar fun√ß√£o <code>ingest_contract()</code>',
                        'Testar diferentes chunk_sizes (256, 512, 1024)',
                        'Verificar quantos chunks foram gerados',
                        'Inspecionar o ChromaDB: <code>ls -la ./chroma_db</code>'
                    ]
                },
                {
                    id: 'ex3',
                    level: 'Intermedi√°rio',
                    levelColor: 'blue',
                    title: 'Tool Customizada',
                    description: 'Crie uma nova tool para calcular o custo total do contrato.',
                    tasks: [
                        'Criar fun√ß√£o <code>calculate_total_cost()</code>',
                        'Tool deve buscar: valor principal, taxa de juros, prazo',
                        'Calcular montante final com juros compostos',
                        'Retornar: <code>{"total": valor, "juros_pagos": juros}</code>',
                        'Adicionar tool √† lista de tools do agente'
                    ]
                },
                {
                    id: 'ex4',
                    level: 'Intermedi√°rio',
                    levelColor: 'blue',
                    title: 'Valida√ß√£o com Pydantic',
                    description: 'Estenda o schema ContractMetadata com novos campos.',
                    tasks: [
                        'Adicionar campo <code>multa_atraso: float</code>',
                        'Adicionar campo <code>correcao_monetaria: str</code>',
                        'Adicionar validador: taxa_juros deve ser entre 0.1% e 5%',
                        'Adicionar validador: prazo_meses deve ser m√∫ltiplo de 6',
                        'Testar com dados inv√°lidos e capturar ValidationError'
                    ]
                },
                {
                    id: 'ex5',
                    level: 'Avan√ßado',
                    levelColor: 'orange',
                    title: 'Hybrid Search',
                    description: 'Implemente busca h√≠brida (dense + sparse) para melhorar retrieval.',
                    tasks: [
                        'Instalar: <code>pip install rank-bm25</code>',
                        'Implementar BM25 retriever para busca keyword',
                        'Combinar resultados: 70% embedding + 30% BM25',
                        'Criar fun√ß√£o <code>hybrid_search(query, k=5)</code>',
                        'Comparar resultados com busca puramente vetorial'
                    ]
                },
                {
                    id: 'ex6',
                    level: 'Avan√ßado',
                    levelColor: 'orange',
                    title: 'Memory com ConversationBufferMemory',
                    description: 'Adicione mem√≥ria conversacional ao agente.',
                    tasks: [
                        'Importar: <code>from langchain.memory import ConversationBufferMemory</code>',
                        'Configurar memory no AgentExecutor',
                        'Fazer 3 perguntas sequenciais sobre o mesmo contrato',
                        'Verificar se agente lembra contexto anterior',
                        'Limpar mem√≥ria: <code>memory.clear()</code>'
                    ]
                },
                {
                    id: 'ex7',
                    level: 'Avan√ßado',
                    levelColor: 'orange',
                    title: 'Multi-Document RAG',
                    description: 'Indexe m√∫ltiplos contratos e implemente busca cross-document.',
                    tasks: [
                        'Ingerir 3 contratos diferentes no mesmo collection',
                        'Adicionar metadata: <code>{"contract_id": "C001", "year": 2024}</code>',
                        'Implementar filtro: buscar apenas contratos de 2024',
                        'Criar query: "Compare garantias entre todos os contratos"',
                        'Agent deve chamar search_contract m√∫ltiplas vezes'
                    ]
                },
                {
                    id: 'ex8',
                    level: 'Expert',
                    levelColor: 'red',
                    title: 'Plan-and-Execute Agent',
                    description: 'Substitua ReAct por Plan-and-Execute para tarefas complexas.',
                    tasks: [
                        'Importar: <code>from langchain.agents import create_plan_and_execute_agent</code>',
                        'Criar Planner LLM (gpt-4) e Executor LLM (gpt-3.5-turbo)',
                        'Task: "Analise todos os contratos e crie relat√≥rio comparativo"',
                        'Agent deve gerar plano com 5+ steps',
                        'Comparar custo e lat√™ncia vs ReAct'
                    ]
                }
            ];

            const exercisesContainer = container.querySelector('#exercises-container');
            exercises.forEach(ex => {
                const savedNotes = localStorage.getItem('exercise-' + ex.id) || '';
                const card = document.createElement('div');
                card.className = 'card';
                
                // Build tasks HTML
                const tasksHTML = ex.tasks.map((task, i) => {
                    return '<li class="flex items-start gap-2">' +
                        '<input type="checkbox" class="mt-1" id="' + ex.id + '-task-' + i + '" ' +
                        'onchange="saveTaskState(\'' + ex.id + '\', ' + i + ', this.checked)">' +
                        '<label for="' + ex.id + '-task-' + i + '">' + task + '</label>' +
                        '</li>';
                }).join('');
                
                card.innerHTML = 
                    '<div class="flex justify-between items-start mb-4">' +
                        '<div>' +
                            '<span class="badge badge-' + ex.levelColor + ' mr-2">' + ex.level + '</span>' +
                            '<h3 class="text-lg font-bold text-white inline">' + ex.title + '</h3>' +
                        '</div>' +
                        '<button onclick="toggleExercise(\'' + ex.id + '\')" class="text-slate-400 hover:text-white transition">' +
                            '<i class="fas fa-chevron-down" id="icon-' + ex.id + '"></i>' +
                        '</button>' +
                    '</div>' +
                    '<p class="text-sm text-slate-400 mb-4">' + ex.description + '</p>' +
                    '<div id="content-' + ex.id + '" class="hidden">' +
                        '<div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700 mb-4">' +
                            '<h4 class="text-xs font-bold text-slate-300 uppercase mb-3">' +
                                '<i class="fas fa-tasks mr-2"></i>Tarefas:' +
                            '</h4>' +
                            '<ul class="space-y-2 text-sm text-slate-300">' +
                                tasksHTML +
                            '</ul>' +
                        '</div>' +
                        '<div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700">' +
                            '<h4 class="text-xs font-bold text-slate-300 uppercase mb-2">' +
                                '<i class="fas fa-sticky-note mr-2 gold-accent"></i>Suas Anota√ß√µes:' +
                            '</h4>' +
                            '<textarea ' +
                                'id="notes-' + ex.id + '" ' +
                                'class="w-full bg-slate-800 border border-slate-600 rounded p-3 text-xs text-white font-mono focus:border-gold-accent outline-none transition resize-vertical" ' +
                                'rows="4" ' +
                                'placeholder="Anote seu c√≥digo, d√∫vidas ou observa√ß√µes aqui..." ' +
                                'onchange="saveNotes(\'' + ex.id + '\', this.value)">' + savedNotes + '</textarea>' +
                            '<div class="text-[10px] text-slate-500 mt-2">' +
                                '<i class="fas fa-save mr-1"></i>Salvo automaticamente no navegador' +
                            '</div>' +
                        '</div>' +
                    '</div>';
                
                exercisesContainer.appendChild(card);
                
                // Restaurar estado dos checkboxes
                ex.tasks.forEach((_, i) => {
                    const saved = localStorage.getItem(ex.id + '-task-' + i);
                    if (saved === 'true') {
                        const checkbox = document.getElementById(ex.id + '-task-' + i);
                        if (checkbox) checkbox.checked = true;
                    }
                });
            });
        }

        // Exercise helpers
        function toggleExercise(id) {
            const content = document.getElementById('content-' + id);
            const icon = document.getElementById('icon-' + id);
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            } else {
                content.classList.add('hidden');
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        }

        function saveNotes(exerciseId, value) {
            localStorage.setItem('exercise-' + exerciseId, value);
        }

        function saveTaskState(exerciseId, taskIndex, checked) {
            localStorage.setItem(exerciseId + '-task-' + taskIndex, checked);
        }

        function initVectorChart() {
            const ctx = document.getElementById('vectorChart').getContext('2d');
            
            // Mock Data Clusters
            // Finance Cluster
            const finance = [
                { x: 0.8, y: 0.8, label: 'Dinheiro' }, { x: 0.85, y: 0.75, label: 'Banco' },
                { x: 0.9, y: 0.82, label: 'Lucro' }, { x: 0.75, y: 0.85, label: 'A√ß√µes' },
                { x: 0.82, y: 0.9, label: 'D√≥lar' }
            ];
            
            // Legal Cluster
            const legal = [
                { x: 0.2, y: 0.8, label: 'Contrato' }, { x: 0.25, y: 0.85, label: 'Lei' },
                { x: 0.15, y: 0.75, label: 'Juiz' }, { x: 0.3, y: 0.82, label: 'Advogado' }
            ];

            // Fruit Cluster (Ambiguity Test)
            const fruit = [
                { x: 0.5, y: 0.2, label: 'Ma√ß√£' }, { x: 0.55, y: 0.25, label: 'Banana' },
                { x: 0.45, y: 0.15, label: 'Uva' }
            ];

            // Tech Cluster (Ambiguity Test)
            const tech = [
                { x: 0.8, y: 0.2, label: 'Apple' }, { x: 0.85, y: 0.15, label: 'Microsoft' },
                { x: 0.9, y: 0.25, label: 'Python' }
            ];

            currentChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        { label: 'Finan√ßas', data: finance, backgroundColor: '#3b82f6', pointRadius: 6 },
                        { label: 'Jur√≠dico', data: legal, backgroundColor: '#a855f7', pointRadius: 6 },
                        { label: 'Frutas', data: fruit, backgroundColor: '#10b981', pointRadius: 6 },
                        { label: 'Tecnologia', data: tech, backgroundColor: '#f97316', pointRadius: 6 },
                        { label: 'Query', data: [], backgroundColor: '#ffffff', pointRadius: 8, pointBorderColor: '#ef4444', pointBorderWidth: 2 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: '#cbd5e1' } },
                        tooltip: {
                            callbacks: {
                                label: (ctx) => ` ${ctx.raw.label} [${ctx.raw.x}, ${ctx.raw.y}]`
                            }
                        }
                    },
                    scales: {
                        x: { display: false, min: 0, max: 1 },
                        y: { display: false, min: 0, max: 1 }
                    }
                }
            });
        }

        function simulateSearch() {
            const query = document.getElementById('query-input').value.toLowerCase();
            const resultBox = document.getElementById('search-result');
            resultBox.classList.remove('hidden');
            
            // Mock logic for demo
            let target = { x: 0.5, y: 0.5, label: query }; // default center
            
            if (['investimento', 'dinheiro', 'taxa', 'juros'].some(w => query.includes(w))) {
                target = { x: 0.82, y: 0.82, label: query };
            } else if (['processo', 'multa', 'r√©u'].some(w => query.includes(w))) {
                target = { x: 0.22, y: 0.82, label: query };
            }

            // Update chart
            currentChart.data.datasets[4].data = [target];
            currentChart.update();
        }

        function renderChunking(container) {
            container.innerHTML = `
                <div class="max-w-4xl mx-auto fade-in">
                    <h2 class="text-2xl font-bold text-white mb-6">Estrat√©gias de Chunking</h2>
                    
                    <div class="grid md:grid-cols-3 gap-6 mb-8">
                        <button onclick="setChunkMode('char')" class="bg-slate-800 p-4 rounded border border-slate-700 hover:border-blue-500 focus:ring-2 ring-blue-500 text-left transition">
                            <h4 class="font-bold text-slate-200 text-sm">Character Splitter</h4>
                            <p class="text-xs text-slate-400 mt-1">Corta a cada 100 caracteres. Simples, mas quebra frases no meio.</p>
                        </button>
                        <button onclick="setChunkMode('recursive')" class="bg-slate-800 p-4 rounded border border-slate-700 hover:border-blue-500 focus:ring-2 ring-blue-500 text-left transition">
                            <h4 class="font-bold text-blue-400 text-sm">Recursive Splitter</h4>
                            <p class="text-xs text-slate-400 mt-1">Respeita par√°grafos e quebras de linha. Padr√£o da ind√∫stria.</p>
                        </button>
                        <button onclick="setChunkMode('semantic')" class="bg-slate-800 p-4 rounded border border-slate-700 hover:border-blue-500 focus:ring-2 ring-blue-500 text-left transition">
                            <h4 class="font-bold text-purple-400 text-sm">Semantic Chunking</h4>
                            <p class="text-xs text-slate-400 mt-1">Usa embeddings para agrupar frases com o mesmo t√≥pico.</p>
                        </button>
                    </div>

                    <div class="bg-slate-900 border border-slate-700 rounded-xl p-6 font-mono text-sm leading-relaxed text-slate-300 shadow-inner min-h-[300px]" id="chunk-display">
                        <!-- Content Injected via JS -->
                    </div>
                </div>
            `;
            setChunkMode('recursive'); // Default
        }

        function setChunkMode(mode) {
            const display = document.getElementById('chunk-display');
            let html = '';
            
            if (mode === 'char') {
                // Mock char split
                const chunks = CONTRACT_TEXT.match(/.{1,150}/g);
                html = chunks.map((c, i) => `<span class="bg-slate-800 border-b-2 border-slate-600 hover:bg-slate-700 px-1 py-0.5 mx-0.5" title="Chunk ${i}">${c}</span>`).join('');
            } else if (mode === 'recursive') {
                // Mock recursive (split by paragraph roughly)
                const chunks = CONTRACT_TEXT.split('\n\n');
                html = chunks.map((c, i) => `
                    <div class="mb-4 p-3 bg-slate-800/50 border-l-4 border-blue-500 rounded hover:bg-slate-800 transition">
                        <span class="text-[10px] text-blue-400 font-bold block mb-1">CHUNK ID: ${i} | TOKENS: ~${c.length/4}</span>
                        ${c.replace(/\n/g, '<br>')}
                    </div>`).join('');
            } else if (mode === 'semantic') {
                // Mock semantic grouping
                const groups = [
                    { title: "Defini√ß√£o Financeira", color: "border-green-500", content: CONTRACT_TEXT.split('CL√ÅUSULA SEGUNDA')[0] },
                    { title: "Condi√ß√µes de Juros", color: "border-yellow-500", content: 'CL√ÅUSULA SEGUNDA' + CONTRACT_TEXT.split('CL√ÅUSULA SEGUNDA')[1].split('CL√ÅUSULA QUARTA')[0] },
                    { title: "Garantias & Penalidades", color: "border-red-500", content: 'CL√ÅUSULA QUARTA' + CONTRACT_TEXT.split('CL√ÅUSULA QUARTA')[1] }
                ];
                html = groups.map((g, i) => `
                    <div class="mb-6 p-4 bg-slate-800/30 border-2 ${g.color} rounded-lg relative">
                        <span class="absolute -top-3 left-4 bg-slate-900 px-2 text-xs font-bold text-slate-300 border border-slate-700 rounded">${g.title}</span>
                        ${g.content.replace(/\n/g, '<br>')}
                    </div>`).join('');
            }

            display.innerHTML = html;
        }

        function renderLab(container) {
            container.innerHTML = `
                <div class="h-full flex flex-col md:flex-row gap-6 fade-in">
                    <!-- Left: Ingestion & Chat -->
                    <div class="w-full md:w-1/3 flex flex-col gap-4">
                        
                        <!-- Upload Card -->
                        <div class="bg-slate-900 border border-slate-800 p-4 rounded-xl">
                            <h3 class="text-sm font-bold text-slate-300 mb-3"><i class="fas fa-upload mr-2"></i>Ingest√£o de Documento</h3>
                            <div class="border-2 border-dashed border-slate-700 rounded-lg p-6 text-center hover:border-blue-500 cursor-pointer transition bg-slate-800/30" onclick="startIngestion()">
                                <i class="fas fa-file-pdf text-3xl text-red-500 mb-2"></i>
                                <div class="text-xs text-slate-400">Arraste ou clique para enviar</div>
                                <div class="text-[10px] text-slate-600 mt-1">contrato_mutuo_v1.pdf</div>
                            </div>
                            <!-- Progress Bar -->
                            <div id="ingest-progress" class="hidden mt-4">
                                <div class="flex justify-between text-[10px] text-slate-400 mb-1">
                                    <span id="ingest-status">Chunking...</span>
                                    <span>100%</span>
                                </div>
                                <div class="w-full bg-slate-700 h-1 rounded-full overflow-hidden">
                                    <div class="bg-green-500 w-full h-full animate-pulse"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Chat Interface -->
                        <div class="flex-1 bg-slate-900 border border-slate-800 rounded-xl flex flex-col overflow-hidden">
                            <div class="p-3 bg-slate-800 border-b border-slate-700 text-xs font-bold text-slate-300">
                                Auditor AI Agent
                            </div>
                            <div id="chat-history" class="flex-1 p-4 space-y-4 overflow-y-auto">
                                <div class="flex gap-3">
                                    <div class="w-6 h-6 rounded-full bg-blue-600 flex items-center justify-center text-[10px]"><i class="fas fa-robot"></i></div>
                                    <div class="bg-slate-800 p-2 rounded-lg rounded-tl-none text-xs text-slate-300 max-w-[80%]">
                                        Ol√°! Fa√ßa o upload do contrato para eu extrair os metadados de risco.
                                    </div>
                                </div>
                            </div>
                            <div class="p-3 bg-slate-800 border-t border-slate-700 flex gap-2">
                                <input type="text" id="agent-input" class="flex-1 bg-slate-900 border border-slate-600 rounded px-2 py-1 text-xs text-white focus:border-blue-500 outline-none" placeholder="Ex: Extraia as garantias...">
                                <button onclick="runAgent()" class="bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded text-xs"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Right: Visualization Pipeline -->
                    <div class="flex-1 bg-slate-900 border border-slate-800 rounded-xl p-1 flex flex-col relative">
                        <!-- Top Bar -->
                        <div class="bg-slate-950 p-2 border-b border-slate-800 flex justify-between items-center text-[10px] font-mono text-slate-500">
                            <span>DEBUG VIEW</span>
                            <span id="pipeline-timer">0ms</span>
                        </div>

                        <!-- Pipeline Content -->
                        <div class="flex-1 p-6 relative overflow-y-auto">
                            
                            <!-- Step 1: Retrieval -->
                            <div id="viz-retrieval" class="mb-8 opacity-20 transition-opacity duration-500">
                                <div class="flex items-center gap-2 mb-2">
                                    <div class="w-2 h-2 rounded-full bg-green-500"></div>
                                    <h4 class="text-xs font-bold text-green-400 uppercase">1. Retrieval (ChromaDB)</h4>
                                </div>
                                <div class="bg-slate-800 border border-green-900/50 p-3 rounded font-mono text-[10px] text-green-200">
                                    <span class="text-slate-500">Query Embedding:</span> [-0.012, 0.452, ...]<br>
                                    <span class="text-slate-500">Top-1 Match (Score 0.92):</span><br>
                                    "CL√ÅUSULA QUARTA - DAS GARANTIAS... im√≥vel de matr√≠cula n¬∫ 12345..."
                                </div>
                            </div>

                            <!-- Step 2: Prompt Assembly -->
                            <div id="viz-prompt" class="mb-8 opacity-20 transition-opacity duration-500">
                                <div class="flex items-center gap-2 mb-2">
                                    <div class="w-2 h-2 rounded-full bg-orange-500"></div>
                                    <h4 class="text-xs font-bold text-orange-400 uppercase">2. Prompt Construction</h4>
                                </div>
                                <div class="bg-slate-800 border border-orange-900/50 p-3 rounded font-mono text-[10px] text-orange-200 whitespace-pre-wrap">
SYSTEM: Voc√™ √© um auditor de compliance.
CONTEXTO: {chunk_retrieved}
INSTRU√á√ÉO: Extraia um JSON com as chaves: garantia_tipo, valor_estimado, status.
                                </div>
                            </div>

                            <!-- Step 3: Structured Output -->
                            <div id="viz-output" class="mb-8 opacity-20 transition-opacity duration-500">
                                <div class="flex items-center gap-2 mb-2">
                                    <div class="w-2 h-2 rounded-full bg-blue-500"></div>
                                    <h4 class="text-xs font-bold text-blue-400 uppercase">3. Output (Pydantic Validation)</h4>
                                </div>
                                <div class="bg-slate-800 border border-blue-900/50 p-3 rounded font-mono text-[10px] text-blue-200">
                                    <pre>{
  "garantia_tipo": "Aliena√ß√£o Fiduci√°ria",
  "objeto": "Im√≥vel Matr√≠cula 12345",
  "risco_legal": "Baixo",
  "compliance_check": true
}</pre>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            `;
        }

        // --- LAB LOGIC ---

        function startIngestion() {
            const progress = document.getElementById('ingest-progress');
            const status = document.getElementById('ingest-status');
            progress.classList.remove('hidden');
            
            status.innerText = "Lendo PDF...";
            setTimeout(() => { status.innerText = "Chunking (Recursive)..."; }, 800);
            setTimeout(() => { status.innerText = "Embedding (OpenAI ada-002)..."; }, 1600);
            setTimeout(() => { 
                status.innerText = "Indexing in ChromaDB..."; 
            }, 2400);
            setTimeout(() => {
                status.innerText = "Pronto!";
                status.classList.add('text-green-400');
                
                // Add system message
                const chat = document.getElementById('chat-history');
                chat.innerHTML += `
                    <div class="flex gap-3 fade-in">
                        <div class="w-6 h-6 rounded-full bg-blue-600 flex items-center justify-center text-[10px]"><i class="fas fa-robot"></i></div>
                        <div class="bg-slate-800 p-2 rounded-lg rounded-tl-none text-xs text-slate-300 max-w-[80%]">
                            Contrato indexado com sucesso (3 chunks). Pode perguntar.
                        </div>
                    </div>
                `;
            }, 3000);
        }

        function runAgent() {
            const input = document.getElementById('agent-input');
            const text = input.value;
            if(!text) return;

            // User msg
            const chat = document.getElementById('chat-history');
            chat.innerHTML += `
                <div class="flex gap-3 justify-end fade-in">
                    <div class="bg-blue-900/50 border border-blue-800 p-2 rounded-lg rounded-tr-none text-xs text-white max-w-[80%]">
                        ${text}
                    </div>
                </div>
            `;
            input.value = '';
            chat.scrollTop = chat.scrollHeight;

            // Trigger Animation Pipeline
            animatePipeline();

            // Final Agent Response
            setTimeout(() => {
                chat.innerHTML += `
                    <div class="flex gap-3 fade-in">
                        <div class="w-6 h-6 rounded-full bg-blue-600 flex items-center justify-center text-[10px]"><i class="fas fa-robot"></i></div>
                        <div class="bg-slate-800 p-2 rounded-lg rounded-tl-none text-xs text-slate-300 max-w-[80%]">
                            Extra√≠ os dados da Cl√°usula Quarta. O im√≥vel de matr√≠cula 12345 foi dado em aliena√ß√£o fiduci√°ria.
                        </div>
                    </div>
                `;
                chat.scrollTop = chat.scrollHeight;
            }, 4000);
        }

        function animatePipeline() {
            const steps = ['viz-retrieval', 'viz-prompt', 'viz-output'];
            
            // Reset
            steps.forEach(id => {
                const el = document.getElementById(id);
                el.classList.add('opacity-20');
                el.classList.remove('opacity-100', 'pulse-border');
            });

            // Step 1
            setTimeout(() => {
                const el = document.getElementById('viz-retrieval');
                el.classList.remove('opacity-20');
                el.classList.add('opacity-100', 'pulse-border');
            }, 500);

            // Step 2
            setTimeout(() => {
                document.getElementById('viz-retrieval').classList.remove('pulse-border');
                const el = document.getElementById('viz-prompt');
                el.classList.remove('opacity-20');
                el.classList.add('opacity-100', 'pulse-border');
            }, 1800);

            // Step 3
            setTimeout(() => {
                document.getElementById('viz-prompt').classList.remove('pulse-border');
                const el = document.getElementById('viz-output');
                el.classList.remove('opacity-20');
                el.classList.add('opacity-100', 'pulse-border');
            }, 3000);
        }

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            // Load first page
            router('intro-rag');
            
            // Add keyboard navigation
            document.addEventListener('keydown', (e) => {
                // Ctrl/Cmd + K para focar na busca (futuro)
                if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                    e.preventDefault();
                    // Future: focus search box
                }
                
                // ESC para fechar mobile menu
                if (e.key === 'Escape') {
                    const mobileMenu = document.getElementById('mobile-menu');
                    if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                        toggleMobileMenu();
                    }
                }
            });
            
            // Add aria-labels to nav items
            document.querySelectorAll('.nav-item').forEach(btn => {
                if (!btn.getAttribute('aria-label')) {
                    btn.setAttribute('aria-label', btn.textContent.trim());
                    btn.setAttribute('role', 'button');
                    btn.setAttribute('tabindex', '0');
                    
                    // Enter key navigation
                    btn.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            btn.click();
                        }
                    });
                }
            });
            
            // Print stylesheet warning
            window.addEventListener('beforeprint', () => {
                console.log('üìÑ Preparando para impress√£o...');
            });
        });

    </script>
</body>
</html>